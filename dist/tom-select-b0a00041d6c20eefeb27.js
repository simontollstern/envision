/*! For license information please see tom-select-b0a00041d6c20eefeb27.js.LICENSE.txt */
(this.webpackChunkenvision=this.webpackChunkenvision||[]).push([[462],{7592:function(e){e.exports=function(){"use strict";function e(e,t){e.split(/\s+/).forEach((e=>{t(e)}))}class t{constructor(){this._events={}}on(t,i){e(t,(e=>{this._events[e]=this._events[e]||[],this._events[e].push(i)}))}off(t,i){var s=arguments.length;0!==s?e(t,(e=>{if(1===s)return delete this._events[e];e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(i),1)})):this._events={}}trigger(t,...i){var s=this;e(t,(e=>{if(e in s._events!=0)for(let t of s._events[e])t.apply(s,i)}))}}function i(e){return e.plugins={},class extends e{static define(t,i){e.plugins[t]={name:t,fn:i}}initializePlugins(e){var t,i,s,n=this,o=[];if(n.plugins={names:[],settings:{},requested:{},loaded:{}},Array.isArray(e))for(t=0,i=e.length;t<i;t++)"string"==typeof e[t]?o.push(e[t]):(n.plugins.settings[e[t].name]=e[t].options,o.push(e[t].name));else if(e)for(s in e)e.hasOwnProperty(s)&&(n.plugins.settings[s]=e[s],o.push(s));for(;o.length;)n.require(o.shift())}loadPlugin(t){var i=this,s=i.plugins,n=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');s.requested[t]=!0,s.loaded[t]=n.fn.apply(i,[i.plugins.settings[t]||{}]),s.names.push(t)}require(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]}}}var s=[[67,67],[160,160],[192,438],[452,652],[961,961],[1019,1019],[1083,1083],[1281,1289],[1984,1984],[5095,5095],[7429,7441],[7545,7549],[7680,7935],[8580,8580],[9398,9449],[11360,11391],[42792,42793],[42802,42851],[42873,42897],[42912,42922],[64256,64260],[65313,65338],[65345,65370]];function n(e){return e.normalize("NFD").replace(/[\u0300-\u036F]/g,"").normalize("NFKD").toLowerCase()}function o(){var e={"l·":"l","ʼn":"n","æ":"ae","ø":"o","aʾ":"a","dž":"dz"},t={};return s.forEach((i=>{for(let s=i[0];s<=i[1];s++){let i=String.fromCharCode(s),n=i.normalize("NFD").replace(/[\u0300-\u036F]/g,"").normalize("NFKD");n!=i&&(n=n.toLowerCase(),n in e&&(n=e[n]),n in t||(t[n]=n+n.toUpperCase()),t[n]+=i)}})),t}var r=null;function a(e){null===r&&(r=o());for(let t in r)r.hasOwnProperty(t)&&(e=e.replace(new RegExp(t,"g"),"["+r[t]+"]"));return e}function l(e,t){if(e)return e[t]}function d(e,t){if(e){for(var i=t.split(".");i.length&&(e=e[i.shift()]););return e}}function c(e,t,i){var s,n;return e?-1===(n=(e+="").search(t.regex))?0:(s=t.string.length/e.length,0===n&&(s+=.5),s*i):0}function p(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function u(e,t){var i=e[t];i&&!Array.isArray(i)&&(e[t]=[i])}function h(e,t){if(Array.isArray(e))e.forEach(t);else for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)}function g(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=n(e+"").toLowerCase())>(t=n(t+"").toLowerCase())?1:t>e?-1:0}class f{constructor(e,t){this.items=void 0,this.settings=void 0,this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,i){if(!e||!e.length)return[];const s=[],n=e.split(/\s+/);var o;return i&&(o=new RegExp("^("+Object.keys(i).map(p).join("|")+"):(.*)$")),n.forEach((e=>{let i,n=null,r=null;o&&(i=e.match(o))&&(n=i[1],e=i[2]),e.length>0&&(r=p(e),this.settings.diacritics&&(r=a(r)),t&&(r="\\b"+r),r=new RegExp(r,"i")),s.push({string:e,regex:r,field:n})})),s}getScoreFunction(e,t){var i=this.prepareSearch(e,t);return this._getScoreFunction(i)}_getScoreFunction(e){const t=e.tokens,i=t.length;if(!i)return function(){return 0};const s=e.options.fields,n=e.weights,o=s.length,r=e.getAttrFn;if(!o)return function(){return 1};const a=1===o?function(e,t){const i=s[0].field;return c(r(t,i),e,n[i])}:function(e,t){var i=0;if(e.field){const s=r(t,e.field);!e.regex&&s?i+=1/o:i+=c(s,e,1)}else h(n,((s,n)=>{i+=c(r(t,n),e,s)}));return i/o};return 1===i?function(e){return a(t[0],e)}:"and"===e.options.conjunction?function(e){for(var s,n=0,o=0;n<i;n++){if((s=a(t[n],e))<=0)return 0;o+=s}return o/i}:function(e){var s=0;return h(t,(t=>{s+=a(t,e)})),s/i}}getSortFunction(e,t){var i=this.prepareSearch(e,t);return this._getSortFunction(i)}_getSortFunction(e){var t,i,s,n,o,r;const a=this,l=e.options,d=!e.query&&l.sort_empty||l.sort,c=[],p=[],u=function(t,i){return"$score"===t?i.score:e.getAttrFn(a.items[i.id],t)};if(d)for(t=0,i=d.length;t<i;t++)(e.query||"$score"!==d[t].field)&&c.push(d[t]);if(e.query){for(r=!0,t=0,i=c.length;t<i;t++)if("$score"===c[t].field){r=!1;break}r&&c.unshift({field:"$score",direction:"desc"})}else for(t=0,i=c.length;t<i;t++)if("$score"===c[t].field){c.splice(t,1);break}for(t=0,i=c.length;t<i;t++)p.push("desc"===c[t].direction?-1:1);return(n=c.length)?1===n?(s=c[0].field,o=p[0],function(e,t){return o*g(u(s,e),u(s,t))}):function(e,t){var i,s,o;for(i=0;i<n;i++)if(o=c[i].field,s=p[i]*g(u(o,e),u(o,t)))return s;return 0}:null}prepareSearch(e,t){const i={};var s=Object.assign({},t);if(u(s,"sort"),u(s,"sort_empty"),s.fields){if(u(s,"fields"),Array.isArray(s.fields)&&"object"!=typeof s.fields[0]){var o=[];s.fields.forEach((e=>{o.push({field:e})})),s.fields=o}s.fields.forEach((e=>{i[e.field]="weight"in e?e.weight:1}))}return{options:s,query:e=n(e+"").toLowerCase().trim(),tokens:this.tokenize(e,s.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:s.nesting?d:l}}search(e,t){var i,s,n,o,r=this;return s=this.prepareSearch(e,t),t=s.options,e=s.query,o=t.score||r._getScoreFunction(s),e.length?h(r.items,((e,n)=>{i=o(e),(!1===t.filter||i>0)&&s.items.push({score:i,id:n})})):h(r.items,((e,t)=>{s.items.push({score:1,id:t})})),(n=r._getSortFunction(s))&&s.items.sort(n),s.total=s.items.length,"number"==typeof t.limit&&(s.items=s.items.slice(0,t.limit)),s}}function v(e,t){if(null!==t){if("string"==typeof t){if(!t.length)return;t=new RegExp(t,"i")}!function e(i){var s=0;if(3===i.nodeType){var n=i.data.search(t);if(n>=0&&i.data.length>0){var o=i.data.match(t),r=document.createElement("span");r.className="highlight";var a=i.splitText(n);a.splitText(o[0].length);var l=a.cloneNode(!0);r.appendChild(l),a.parentNode.replaceChild(r,a),s=1}}else if(1===i.nodeType&&i.childNodes&&!/(script|style)/i.test(i.tagName)&&("highlight"!==i.className||"SPAN"!==i.tagName))for(var d=0;d<i.childNodes.length;++d)d+=e(i.childNodes[d]);return s}(e)}}function m(e){var t=document.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,(function(e,t){var i=e.parentNode;i.replaceChild(e.firstChild,e),i.normalize()}))}const y=65,O=13,b=27,w=37,C=38,I=39,_=40,A=8,x=46,S=9,k="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var F={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,closeAfterSelect:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-control",inputClass:"ts-input",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:null,copyClassesToDropdown:!0,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return e.length>0},render:{}};function L(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""}function P(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function E(e,t){var i;return function(s,n){var o=this;i&&(o.loading=Math.max(o.loading-1,0)),clearTimeout(i),i=setTimeout((function(){i=null,o.loadedSearches[s]=!0,e.call(o,s,n)}),t)}}function q(e,t,i){var s,n=e.trigger,o={};for(s in e.trigger=function(){var i=arguments[0];if(-1===t.indexOf(i))return n.apply(e,arguments);o[i]=arguments},i.apply(e,[]),e.trigger=n,o)n.apply(e,o[s])}function T(e){return{start:e.selectionStart,length:e.selectionEnd-e.selectionStart}}function V(e,t=!1){e&&(e.preventDefault(),t&&e.stopPropagation())}function j(e,t,i,s){e.addEventListener(t,i,s)}function D(e,t){return!!t&&!!t[e]&&1==(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0)}function N(e,t){const i=e.getAttribute("id");return i||(e.setAttribute("id",t),t)}function R(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'")}function z(e,t){var i=Object.assign({},F,t),s=i.dataAttr,n=i.labelField,o=i.valueField,r=i.disabledField,a=i.optgroupField,l=i.optgroupLabelField,d=i.optgroupValueField,c=e.tagName.toLowerCase(),p=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");if(!p&&!i.allowEmptyOption){let t=e.querySelector('option[value=""]');t&&(p=t.textContent)}var u={placeholder:p,options:[],optgroups:[],items:[],maxItems:null},h=()=>{var t,r,a=e.getAttribute(s);if(a){u.options=JSON.parse(a);for(const e of u.options)u.items.push(e[o])}else{var l=e.value.trim()||"";if(!i.allowEmptyOption&&!l.length)return;t=l.split(i.delimiter);for(const e of t)(r={})[n]=e,r[o]=e,u.options.push(r);u.items=t}};return"select"===c?(()=>{var t,c=u.options,p={},h=1,g=e=>{var t=Object.assign({},e.dataset),i=s&&t[s];return"string"==typeof i&&i.length&&(t=Object.assign(t,JSON.parse(i))),t},f=(e,t)=>{var s=L(e.value);if(s||i.allowEmptyOption)if(p.hasOwnProperty(s)){if(t){var l=p[s][a];l?Array.isArray(l)?l.push(t):p[s][a]=[l,t]:p[s][a]=t}}else{var d=g(e);d[n]=d[n]||e.textContent,d[o]=d[o]||s,d[r]=d[r]||e.disabled,d[a]=d[a]||t,d.$option=e,p[s]=d,c.push(d),e.selected&&u.items.push(s)}},v=e=>{var t,i;(i=g(e))[l]=i[l]||e.getAttribute("label")||"",i[d]=i[d]||h++,i[r]=i[r]||e.disabled,u.optgroups.push(i),t=i[d];for(const i of e.children)f(i,t)};u.maxItems=e.hasAttribute("multiple")?null:1;for(const i of e.children)"optgroup"===(t=i.tagName.toLowerCase())?v(i):"option"===t&&f(i)})():h(),Object.assign({},F,u,t)}function H(e){if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(e.indexOf("<")>-1){let t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}return document.querySelector(e)}function K(e){return e.replace(/['"\\]/g,"\\$&")}function B(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!1),e.dispatchEvent(i)}function M(e,t){Object.assign(e.style,t)}function Q(e,...t){var i=G(t);(e=J(e)).map((e=>{i.map((t=>{e.classList.add(t)}))}))}function U(e,...t){var i=G(t);(e=J(e)).map((e=>{i.map((t=>{e.classList.remove(t)}))}))}function G(e){var t=[];for(let i of e)"string"==typeof i&&(i=i.trim().split(/[\11\12\14\15\40]/)),Array.isArray(i)&&(t=t.concat(i));return t.filter(Boolean)}function J(e){return Array.isArray(e)||(e=[e]),e}function W(e,t,i){if(!i||i.contains(e))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}}function X(e,t){return t>0?e[e.length-1]:e[0]}function Y(e){return 0===Object.keys(e).length}function Z(e,t){if(!e)return-1;t=t||e.nodeName;for(var i=0;e=e.previousElementSibling;)e.matches(t)&&i++;return i}function ee(e,t){for(const i in t)e.setAttribute(i,t[i])}var te=0;class ie extends(i(t)){constructor(e,t){var i;super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.tab_key=!1,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.hasOptions=!1,this.currentResults=null,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.renderCache={item:{},option:{}},te++;var s=H(e);if(s.tomselect)throw new Error("Tom Select already initialized on this element");s.tomselect=this,i=(window.getComputedStyle&&window.getComputedStyle(s,null)).getPropertyValue("direction"),this.settings=z(s,t),this.input=s,this.tabIndex=s.tabIndex||0,this.is_select_tag="select"===s.tagName.toLowerCase(),this.rtl=/rtl/i.test(i),this.inputId=N(s,"tomselect-"+te),this.isRequired=s.required,this.sifter=new f(this.options,{diacritics:this.settings.diacritics}),this.setupOptions(this.settings.options,this.settings.optgroups),delete this.settings.optgroups,delete this.settings.options,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),"boolean"!=typeof this.settings.hidePlaceholder&&(this.settings.hidePlaceholder="multi"!==this.settings.mode);var n=this.settings.createFilter;"function"!=typeof n&&("string"==typeof n&&(n=new RegExp(n)),n instanceof RegExp?this.settings.createFilter=e=>n.test(e):this.settings.createFilter=()=>!0),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()}setup(){var e,t,i,s,n,o,r,a,l,d=this,c=d.settings,u=d.input;const h={passive:!0},g=d.inputId+"-ts-dropdown";if(o=d.settings.mode,r=u.getAttribute("class")||"",Q(e=H("<div>"),c.wrapperClass,r,o),Q(t=H('<div class="items">'),c.inputClass),e.append(t),Q(s=d.render("dropdown"),c.dropdownClass,o),Q(n=H(`<div role="listbox" id="${g}" tabindex="-1">`),c.dropdownContentClass),s.append(n),H(c.dropdownParent||e).appendChild(s),c.controlInput)i=H(c.controlInput);else{i=H('<input type="text" autocomplete="off" size="1" />');var f=["autocorrect","autocapitalize","autocomplete"];for(const e of f)u.getAttribute(e)&&ee(i,{[e]:u.getAttribute(e)})}c.controlInput||(i.tabIndex=u.disabled?-1:d.tabIndex,t.appendChild(i)),ee(i,{role:"combobox",haspopup:"listbox","aria-expanded":"false","aria-controls":g}),l=N(i,d.inputId+"-tomselected");let v="label[for='"+K(d.inputId)+"']",m=document.querySelector(v);m&&(ee(m,{for:l}),ee(n,{"aria-labelledby":N(m,d.inputId+"-ts-label")})),d.settings.copyClassesToDropdown&&Q(s,r),e.style.width=u.style.width,d.plugins.names.length&&(a="plugin-"+d.plugins.names.join(" plugin-"),Q([e,s],a)),(null===c.maxItems||c.maxItems>1)&&d.is_select_tag&&ee(u,{multiple:"multiple"}),d.settings.placeholder&&ee(i,{placeholder:c.placeholder}),!d.settings.splitOn&&d.settings.delimiter&&(d.settings.splitOn=new RegExp("\\s*"+p(d.settings.delimiter)+"+\\s*")),this.settings.load&&this.settings.loadThrottle&&(this.settings.load=E(this.settings.load,this.settings.loadThrottle)),d.control=t,d.control_input=i,d.wrapper=e,d.dropdown=s,d.dropdown_content=n,d.control_input.type=u.type,j(s,"click",(e=>{const t=W(e.target,"[data-selectable]");t&&d.onOptionSelect(e,t)})),j(t,"click",(e=>{var s=W(e.target,"."+d.settings.itemClass,t);s&&d.onItemSelect(e,s)||""==i.value&&d.onClick(e)})),j(i,"mousedown",(e=>{""!==i.value&&e.stopPropagation()})),j(i,"keydown",(e=>d.onKeyDown(e))),j(i,"keyup",(e=>d.onKeyUp(e))),j(i,"keypress",(e=>d.onKeyPress(e))),j(i,"resize",(()=>d.positionDropdown()),h),j(i,"blur",(e=>d.onBlur(e))),j(i,"focus",(e=>d.onFocus(e))),j(i,"paste",(e=>d.onPaste(e)));const y=t=>{if(!e.contains(t.target)&&!s.contains(t.target))return d.isFocused&&d.blur(),void d.inputState();V(t,!0)};var O=()=>{d.isOpen&&d.positionDropdown()};j(document,"mousedown",y),j(window,"sroll",O,h),j(window,"resize",O,h),d._destroy=()=>{document.removeEventListener("mousedown",y),window.removeEventListener("sroll",O),window.removeEventListener("resize",O)},this.revertSettings={innerHTML:u.innerHTML,tabIndex:u.tabIndex},u.tabIndex=-1,ee(u,{hidden:"hidden"}),u.insertAdjacentElement("afterend",d.wrapper),d.setValue(c.items),delete c.items,j(u,"invalid",(e=>{V(e),d.isInvalid||(d.isInvalid=!0,d.refreshState())})),d.updateOriginalInput(),d.refreshItems(),d.refreshState(),d.inputState(),d.isSetup=!0,u.disabled&&d.disable(),d.on("change",this.onChange),Q(u,"tomselected"),d.trigger("initialize"),!0===c.preload&&d.load("")}setupOptions(e=[],t=[]){for(const t of e)this.registerOption(t);for(const e of t)this.registerOptionGroup(e)}setupTemplates(){var e=this,t=e.settings.labelField,i=e.settings.optgroupLabelField,s={optgroup:(e,t)=>{let i=document.createElement("div");return i.className="optgroup",i.appendChild(e.options),i},optgroup_header:(e,t)=>'<div class="optgroup-header">'+t(e[i])+"</div>",option:(e,i)=>"<div>"+i(e[t])+"</div>",item:(e,i)=>"<div>"+i(e[t])+"</div>",option_create:(e,t)=>'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>",no_results:(e,t)=>'<div class="no-results">No results found</div>',loading:(e,t)=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},s,e.settings.render)}setupCallbacks(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)(t=this.settings[i[e]])&&this.on(e,t)}onClick(e){var t=this;if(t.activeItems.length>0)return t.clearActiveItems(),void t.focus();t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(e){}onChange(){B(this.input,"input"),B(this.input,"change")}onPaste(e){var t=this;t.isFull()||t.isInputHidden||t.isLocked?V(e):t.settings.splitOn&&setTimeout((()=>{var e=t.inputValue();if(e.match(t.settings.splitOn)){var i=e.trim().split(t.settings.splitOn);for(const e of i)t.createItem(e)}}),0)}onKeyPress(e){var t=this;if(!t.isLocked){var i=String.fromCharCode(e.keyCode||e.which);return t.settings.create&&"multi"===t.settings.mode&&i===t.settings.delimiter?(t.createItem(),void V(e)):void 0}V(e)}onKeyDown(e){var t=this;if(t.isLocked)e.keyCode!==S&&V(e);else{switch(e.keyCode){case y:if(D(k,e))return void t.selectAll();break;case b:return t.isOpen&&(V(e,!0),t.close()),void t.clearActiveItems();case _:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){let e=t.getAdjacent(t.activeOption,1);e&&t.setActiveOption(e)}return void V(e);case C:if(t.activeOption){let e=t.getAdjacent(t.activeOption,-1);e&&t.setActiveOption(e)}return void V(e);case O:return void(t.isOpen&&t.activeOption?(t.onOptionSelect(e,t.activeOption),V(e)):t.settings.create&&t.createItem()&&V(e));case w:return void t.advanceSelection(-1,e);case I:return void t.advanceSelection(1,e);case S:return void(t.settings.selectOnTab&&(t.isOpen&&t.activeOption&&(t.tab_key=!0,t.onOptionSelect(e,t.activeOption),V(e),t.tab_key=!1),t.settings.create&&t.createItem()&&V(e)));case A:case x:return void t.deleteSelection(e)}t.isInputHidden&&!D(k,e)&&V(e)}}onKeyUp(e){var t=this;if(t.isLocked)V(e);else{var i=t.inputValue();t.lastValue!==i&&(t.lastValue=i,t.settings.shouldLoad.call(t,i)&&t.load(i),t.refreshOptions(),t.trigger("type",i))}}onFocus(e){var t=this,i=t.isFocused;if(t.isDisabled)return t.blur(),void V(e);t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.load(""),i||t.trigger("focus"),t.activeItems.length||(t.showInput(),t.setActiveItem(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}onBlur(e){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var i=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,!1,i):i()}}onOptionSelect(e,t){var i,s=this;t&&(t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?s.createItem(null,!0,(()=>{s.settings.closeAfterSelect&&s.close()})):void 0!==(i=t.dataset.value)&&(s.lastQuery=null,s.addItem(i),s.settings.closeAfterSelect?s.close():!s.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&s.setActiveOption(s.getOption(i)))))}onItemSelect(e,t){var i=this;return!i.isLocked&&"multi"===i.settings.mode&&(V(e),i.setActiveItem(t,e),!0)}canLoad(e){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(e)}load(e){const t=this;if(!t.canLoad(e))return;Q(t.wrapper,t.settings.loadingClass),t.loading++;const i=t.loadCallback.bind(t,e);t.settings.load.call(t,e,i)}loadCallback(e,t,i){const s=this;s.loading=Math.max(s.loading-1,0),s.lastQuery=null,s.clearActiveOption(),s.setupOptions(t,i),s.refreshOptions(s.isFocused&&!s.isInputHidden),s.loading||U(s.wrapper,s.settings.loadingClass),s.trigger("load",t,i)}setTextboxValue(e=""){var t=this.control_input;t.value!==e&&(t.value=e,B(t,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,t){q(this,t?[]:["change"],(()=>{this.clear(t),this.addItems(e,t)}))}setMaxItems(e){0===e&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,t){var i,s,n,o,r,a,l=this;if("single"!==l.settings.mode){if(!e)return l.clearActiveItems(),void(l.isFocused&&l.showInput());if("click"===(i=t&&t.type.toLowerCase())&&D("shiftKey",t)&&l.activeItems.length){for(a=l.getLastActive(),(n=Array.prototype.indexOf.call(l.control.children,a))>(o=Array.prototype.indexOf.call(l.control.children,e))&&(r=n,n=o,o=r),s=n;s<=o;s++)e=l.control.children[s],-1===l.activeItems.indexOf(e)&&l.setActiveItemClass(e);V(t)}else"click"===i&&D(k,t)||"keydown"===i&&D("shiftKey",t)?e.classList.contains("active")?l.removeActiveItem(e):l.setActiveItemClass(e):(l.clearActiveItems(),l.setActiveItemClass(e));l.hideInput(),l.isFocused||l.focus()}}setActiveItemClass(e){var t=this.control.querySelector(".last-active");t&&U(t,"last-active"),Q(e,"active last-active"),-1==this.activeItems.indexOf(e)&&this.activeItems.push(e)}removeActiveItem(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),U(e,"active")}clearActiveItems(){U(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e){var t,i,s;if(e===this.activeOption)return;if(this.clearActiveOption(),!e)return;this.activeOption=e,ee(this.control_input,{"aria-activedescendant":e.getAttribute("id")}),ee(e,{"aria-selected":"true"}),Q(e,"active"),t=this.dropdown_content.clientHeight;let n=this.dropdown_content.scrollTop||0;i=this.activeOption.offsetHeight,(s=this.activeOption.getBoundingClientRect().top-this.dropdown_content.getBoundingClientRect().top+n)+i>t+n?this.dropdown_content.scrollTop=s-t+i:s<n&&(this.dropdown_content.scrollTop=s)}clearActiveOption(){this.activeOption&&(U(this.activeOption,"active"),this.activeOption.removeAttribute("aria-selected")),this.activeOption=null,this.control_input.removeAttribute("aria-activedescendant")}selectAll(){"single"!==this.settings.mode&&(this.activeItems=this.controlChildren(),this.activeItems.length&&(Q(this.activeItems,"active"),this.hideInput(),this.close()),this.focus())}inputState(){var e=this;e.settings.controlInput||(e.activeItems.length>0||!e.isFocused&&this.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0,Q(e.wrapper,"input-hidden")):(e.isInputHidden=!1,U(e.wrapper,"input-hidden")))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.control_input.focus(),setTimeout((()=>{e.ignoreFocus=!1,e.onFocus()}),0))}blur(){this.control_input.blur(),this.onBlur(null)}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,t=e.sortField;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(e){var t,i,s,n=this,o=n.settings,r=this.getSearchOptions();if(o.score&&"function"!=typeof(s=n.settings.score.call(n,e)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(e!==n.lastQuery?(n.lastQuery=e,i=n.sifter.search(e,Object.assign(r,{score:s})),n.currentResults=i):i=Object.assign({},n.currentResults),o.hideSelected)for(t=i.items.length-1;t>=0;t--)-1!==n.items.indexOf(L(i.items[t].id))&&i.items.splice(t,1);return i}refreshOptions(e=!0){var t,i,s,n,o,r,a,l,d,c,p,u,h=this,g=h.inputValue(),f=h.search(g),y=h.activeOption&&L(h.activeOption.dataset.value),O=h.settings.shouldOpen||!1;for(n=f.items.length,"number"==typeof h.settings.maxOptions&&(n=Math.min(n,h.settings.maxOptions)),n>0&&(O=!0),u={},o=[],t=0;t<n;t++){let e=h.options[f.items[t].id],n=L(e[h.settings.valueField]),l=h.getOption(n);for(l||(l=h.render("option",e)),h.settings.hideSelected||l.classList.toggle("selected",h.items.includes(n)),r=e[h.settings.optgroupField]||"",i=0,s=(a=Array.isArray(r)?r:[r])&&a.length;i<s;i++)r=a[i],h.optgroups.hasOwnProperty(r)||(r=""),u.hasOwnProperty(r)||(u[r]=document.createDocumentFragment(),o.push(r)),i>0&&(l=l.cloneNode(!0),U(l,"active"),l.removeAttribute("aria-selected")),u[r].appendChild(l)}for(r of(this.settings.lockOptgroupOrder&&o.sort(((e,t)=>(h.optgroups[e]&&h.optgroups[e].$order||0)-(h.optgroups[t]&&h.optgroups[t].$order||0))),l=document.createDocumentFragment(),o))if(h.optgroups.hasOwnProperty(r)&&u[r].children.length){let e=document.createDocumentFragment();e.append(h.render("optgroup_header",h.optgroups[r])),e.append(u[r]);let t=h.render("optgroup",{group:h.optgroups[r],options:e});l.append(t)}else l.append(u[r]);if(h.dropdown_content.innerHTML="",h.dropdown_content.append(l),h.settings.highlight&&(m(h.dropdown_content),f.query.length&&f.tokens.length))for(const e of f.tokens)v(h.dropdown_content,e.regex);var b=e=>{let t=h.render(e,{input:g});return t&&(O=!0,h.dropdown_content.insertBefore(t,h.dropdown_content.firstChild)),t};if(h.settings.shouldLoad.call(h,g)?h.loading?b("loading"):0===f.items.length&&b("no_results"):b("not_loading"),(d=h.canCreate(g))&&(p=b("option_create")),h.hasOptions=f.items.length>0||d,O){if(f.items.length>0){if(!(c=y&&h.getOption(y))&&"single"===h.settings.mode&&h.items.length&&(c=h.getOption(h.items[0])),!c||!h.dropdown_content.contains(c)){let e=0;p&&!h.settings.addPrecedence&&(e=1),c=h.selectable()[e]}}else c=p;h.setActiveOption(c),e&&!h.isOpen&&h.open()}else h.clearActiveOption(),e&&h.isOpen&&h.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e){var t,i=this;if(Array.isArray(e))for(const t of e)i.addOption(t);else(t=i.registerOption(e))&&(i.userOptions[t]=!0,i.lastQuery=null,i.trigger("option_add",t,e))}registerOption(e){var t=L(e[this.settings.valueField]);return null!==t&&!this.options.hasOwnProperty(t)&&(e.$order=e.$order||++this.order,e.$id=this.inputId+"-opt-"+e.$order,this.options[t]=e,t)}registerOptionGroup(e){var t=L(e[this.settings.optgroupValueField]);return null!==t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}addOptionGroup(e,t){var i;t[this.settings.optgroupValueField]=e,(i=this.registerOptionGroup(t))&&this.trigger("optgroup_add",i,t)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,t){var i,s,n,o,r,a,l,d=this;if(e=L(e),n=L(t[d.settings.valueField]),null!==e&&d.options.hasOwnProperty(e)){if("string"!=typeof n)throw new Error("Value must be set in option data");l=d.options[e].$order,n!==e&&(delete d.options[e],-1!==(o=d.items.indexOf(e))&&d.items.splice(o,1,n)),t.$order=t.$order||l,d.options[n]=t,r=d.renderCache.item,a=d.renderCache.option,r&&(delete r[e],delete r[n]),a&&(delete a[e],delete a[n]),-1!==d.items.indexOf(n)&&(i=d.getItem(e),s=d.render("item",t),i.classList.contains("active")&&Q(s,"active"),i.parentNode.insertBefore(s,i),i.remove()),d.lastQuery=null,d.isOpen&&d.refreshOptions(!1)}}removeOption(e,t){var i=this;e=L(e);var s=i.renderCache.item,n=i.renderCache.option;s&&delete s[e],n&&delete n[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)}clearOptions(){this.loadedSearches={},this.userOptions={},this.clearCache();var e={};for(let t in this.options)this.options.hasOwnProperty(t)&&this.items.indexOf(t)>=0&&(e[t]=this.options[t]);this.options=this.sifter.items=e,this.lastQuery=null,this.trigger("option_clear")}getOption(e){if(e=L(e)){const t=this.dropdown_content.querySelector(`[data-selectable][data-value="${R(e)}"]`);if(t)return t}if(this.renderCache.option.hasOwnProperty(e))return this.renderCache.option[e]}getAdjacent(e,t,i="option"){var s,n=this;if(e){s="item"==i?n.controlChildren():n.dropdown_content.querySelectorAll("[data-selectable]");for(let i=0;i<s.length;i++)if(s[i]==e)return t>0?s[i+1]:s[i-1]}}getItem(e){if(e=L(e))return e=R(e),this.control.querySelector(`[data-value="${e}"]`)}addItems(e,t){var i=this;i.buffer=document.createDocumentFragment();for(const e of i.control.children)i.buffer.appendChild(e);var s=Array.isArray(e)?e:[e];for(let e=0,n=(s=s.filter((e=>-1===i.items.indexOf(e)))).length;e<n;e++)i.isPending=e<n-1,i.addItem(s[e],t);var n=i.control;n.insertBefore(i.buffer,n.firstChild),i.buffer=null}addItem(e,t){q(this,t?[]:["change"],(()=>{var i,s,n=this,o=n.settings.mode;if(e=L(e),(-1===n.items.indexOf(e)||("single"===o&&n.close(),"single"!==o&&n.settings.duplicates))&&n.options.hasOwnProperty(e)&&("single"===o&&n.clear(t),"multi"!==o||!n.isFull())){if(i=n.render("item",n.options[e]),n.control.contains(i)&&(i=i.cloneNode(!0)),s=n.isFull(),n.items.splice(n.caretPos,0,e),n.insertAtCaret(i),n.isSetup){let s=n.selectable();if(!n.isPending){let t=n.getOption(e),i=n.getAdjacent(t,1);n.refreshOptions(n.isFocused&&"single"!==o),i&&n.setActiveOption(i)}!s.length||n.isFull()?n.close():n.isPending||n.positionDropdown(),n.trigger("item_add",e,i),n.isPending||n.updateOriginalInput({silent:t})}(!n.isPending||!s&&n.isFull())&&n.refreshState()}}))}removeItem(e,t){var i,s,n=this,o=n.getItem(e);o&&(e=L(o.dataset.value),-1!==(i=n.items.indexOf(e))&&(o.remove(),o.classList.contains("active")&&(s=n.activeItems.indexOf(o),n.activeItems.splice(s,1),U(o,"active")),n.items.splice(i,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(e)&&n.removeOption(e,t),i<n.caretPos&&n.setCaret(n.caretPos-1),n.updateOriginalInput({silent:t}),n.refreshState(),n.positionDropdown(),n.trigger("item_remove",e,o)))}createItem(e,t=!0,i){var s,n=this,o=n.caretPos;if(e=e||n.inputValue(),"function"!=typeof i&&(i=()=>{}),!n.canCreate(e))return i(),!1;n.lock();var r=!1,a=e=>{if(n.unlock(),!e||"object"!=typeof e)return i();var s=L(e[n.settings.valueField]);if("string"!=typeof s)return i();n.setTextboxValue(),n.addOption(e),n.setCaret(o),n.addItem(s),n.refreshOptions(t&&"single"!==n.settings.mode),i(e),r=!0};return s="function"==typeof n.settings.create?n.settings.create.call(this,e,a):{[n.settings.labelField]:e,[n.settings.valueField]:e},r||a(s),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){var e=this;e.refreshValidityState();var t=e.isFull(),i=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);var s=e.control.classList;s.toggle("focus",e.isFocused),s.toggle("disabled",e.isDisabled),s.toggle("required",e.isRequired),s.toggle("invalid",e.isInvalid),s.toggle("locked",i),s.toggle("full",t),s.toggle("not-full",!t),s.toggle("input-active",e.isFocused&&!e.isInputHidden),s.toggle("dropdown-active",e.isOpen),s.toggle("has-options",Y(e.options)),s.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;if(e.input.checkValidity){this.isRequired&&(e.input.required=!0);var t=!e.input.checkValidity();e.isInvalid=t,e.control_input.required=t,this.isRequired&&(e.input.required=!t)}}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){var t,i,s=this;if(s.is_select_tag)for(s.input.querySelectorAll("option[selected]").forEach((e=>{-1==s.items.indexOf(e.value)&&(e.selected=!1,e.removeAttribute("selected"))})),t=s.items.length-1;t>=0;t--){var n;if(i=s.items[t],!(n=s.options[i].$option)){const e=s.options[i][s.settings.labelField]||"";n=H('<option value="'+P(i)+'">'+P(e)+"</option>"),s.options[i].$option=n}n.selected=!0,ee(n,{selected:"true"}),s.input.prepend(n)}else s.input.value=s.getValue();s.isSetup&&(e.silent||s.trigger("change",s.getValue()))}open(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.isOpen=!0,ee(e.control_input,{"aria-expanded":"true"}),e.refreshState(),M(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),M(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var t=this,i=t.isOpen;e&&(t.setTextboxValue(),"single"===t.settings.mode&&t.items.length&&(t.hideInput(),t.tab_key||t.blur())),t.isOpen=!1,ee(t.control_input,{"aria-expanded":"false"}),M(t.dropdown,{display:"none"}),t.clearActiveOption(),t.refreshState(),i&&t.trigger("dropdown_close",t.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var e=this.control,t=e.getBoundingClientRect(),i=e.offsetHeight+t.top+window.scrollY,s=t.left+window.scrollX;M(this.dropdown,{width:t.width+"px",top:i+"px",left:s+"px"})}}clear(e){var t=this;if(t.items.length){var i=t.controlChildren();for(const e of i)e.remove();t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear")}}insertAtCaret(e){var t=this,i=Math.min(t.caretPos,t.items.length),s=t.buffer||t.control;0===i?s.insertBefore(e,s.firstChild):s.insertBefore(e,s.children[i]),t.setCaret(i+1)}deleteSelection(e){var t,i,s,n,o=this;if(t=e&&e.keyCode===A?-1:1,i=T(o.control_input),s=[],o.activeItems.length){n=Z(X(o.activeItems,t)),t>0&&n++;for(const e of o.activeItems)s.push(e.dataset.value)}else(o.isFocused||"single"===o.settings.mode)&&o.items.length&&(t<0&&0===i.start&&0===i.length?s.push(o.items[o.caretPos-1]):t>0&&i.start===o.inputValue().length&&s.push(o.items[o.caretPos]));if(!s.length||"function"==typeof o.settings.onDelete&&!1===o.settings.onDelete.call(o,s,e))return!1;for(V(e,!0),void 0!==n&&o.setCaret(n);s.length;)o.removeItem(s.pop());return o.showInput(),o.positionDropdown(),o.refreshOptions(!1),!0}advanceSelection(e,t){var i,s,n,o=this;o.rtl&&(e*=-1),o.inputValue().length||(D(k,t)||D("shiftKey",t)?(n=(s=o.getLastActive(e))?s.classList.contains("active")?o.getAdjacent(s,e,"item"):s:e>0?o.control_input.nextElementSibling:o.control_input.previousElementSibling)&&(n.classList.contains("active")&&o.removeActiveItem(s),o.setActiveItemClass(n)):o.isFocused&&!o.activeItems.length?o.setCaret(o.caretPos+e):(s=o.getLastActive(e))&&(i=Z(s),o.setCaret(e>0?i+1:i),o.setActiveItem()))}getLastActive(e){let t=this.control.querySelector(".last-active");if(t)return t;var i=this.control.querySelectorAll(".active");return i?X(i,e):void 0}setCaret(e){var t=this;"single"===t.settings.mode||t.settings.controlInput?e=t.items.length:(e=Math.max(0,Math.min(t.items.length,e)))==t.caretPos||t.isPending||t.controlChildren().forEach(((i,s)=>{s<e?t.control_input.insertAdjacentElement("beforebegin",i):t.control.appendChild(i)})),t.caretPos=e}controlChildren(){return Array.from(this.control.getElementsByClassName(this.settings.itemClass))}lock(){this.close(),this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){var e=this;e.input.disabled=!0,e.control_input.disabled=!0,e.control_input.tabIndex=-1,e.isDisabled=!0,e.lock()}enable(){var e=this;e.input.disabled=!1,e.control_input.disabled=!1,e.control_input.tabIndex=e.tabIndex,e.isDisabled=!1,e.unlock()}destroy(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,U(e.input,"tomselected"),e.input.removeAttribute("hidden"),e.input.required=this.isRequired,e._destroy(),delete e.input.tomselect}render(e,t){var i,s,n=this;if(("option"===e||"item"===e)&&(i=L(t[n.settings.valueField]),n.renderCache[e].hasOwnProperty(i)))return n.renderCache[e][i];var o=n.settings.render[e];return"function"!=typeof o?null:(s=o.call(this,t,P))?(s=H(s),"option"===e||"option_create"===e?t[n.settings.disabledField]?ee(s,{"aria-disabled":"true"}):ee(s,{"data-selectable":""}):"optgroup"===e&&(ee(s,{"data-group":t.group[n.settings.optgroupValueField]}),t.group[n.settings.disabledField]&&ee(s,{"data-disabled":""})),"option"!==e&&"item"!==e||(ee(s,{"data-value":i}),"item"===e?Q(s,n.settings.itemClass):(Q(s,n.settings.optionClass),ee(s,{role:"option",id:t.$id})),n.renderCache[e][i]=s),s):s}clearCache(e){var t=this;void 0===e?t.renderCache={item:{},option:{}}:t.renderCache[e]={}}canCreate(e){return this.settings.create&&e.length&&this.settings.createFilter.call(this,e)}hook(e,t,i){var s=this,n=s[t];s[t]=function(){var t,o;return"after"===e&&(t=n.apply(s,arguments)),o=i.apply(s,arguments),"instead"===e?o:("before"===e&&(t=n.apply(s,arguments)),t)}}}return ie.define("change_listener",(function(e){var t=this,i=!1;j(t.input,"change",(()=>{if(i)i=!1;else{i=!0;var e=z(t.input,{});t.setupOptions(e.options,e.optgroups),t.setValue(e.items)}}))})),ie.define("checkbox_options",(function(e){var t=this,i=t.onOptionSelect;t.settings.hideSelected=!1;var s=function(e){setTimeout((()=>{var t=e.querySelector("input");e.classList.contains("selected")?t.checked=!0:t.checked=!1}),1)};t.hook("after","setupTemplates",(()=>{var e=t.settings.render.option;t.settings.render.option=function(i){var s=H(e.apply(t,arguments)),n=document.createElement("input");n.addEventListener("click",(function(e){V(e)})),n.type="checkbox";var o=L(i[t.settings.valueField]);return t.items.indexOf(o)>-1&&(n.checked=!0),s.prepend(n),s}})),t.on("item_remove",(e=>{var i=t.getOption(e);i&&(i.classList.remove("selected"),s(i))})),t.hook("instead","onOptionSelect",(function(e,n){if(n.classList.contains("selected"))return n.classList.remove("selected"),t.removeItem(n.dataset.value),t.refreshOptions(),void V(e,!0);i.apply(t,arguments),s(n)}))})),ie.define("clear_button",(function(e){var t=this;e=Object.assign({className:"clear-button",title:"Clear All",html:e=>`<div class="${e.className}" title="${e.title}">&times;</div>`},e),t.hook("after","setup",(()=>{var i=H(e.html(e));i.addEventListener("click",(e=>{for(;t.items.length>0;)t.removeItem(t.items[0],!0);t.updateOriginalInput(),e.preventDefault(),e.stopPropagation()})),t.control.appendChild(i)}))})),ie.define("drag_drop",(function(e){var t=this;if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===t.settings.mode){var i=t.lock,s=t.unlock;t.hook("instead","lock",(function(){var e=t.control.dataset.sortable;return e&&e.disable(),i.apply(t,arguments)})),t.hook("instead","unlock",(function(){var e=t.control.dataset.sortable;return e&&e.enable(),s.apply(t,arguments)})),t.hook("after","setup",(()=>{var e=$(t.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:(t,i)=>{i.placeholder.css("width",i.helper.css("width")),e.css({overflow:"visible"})},stop:()=>{e.css({overflow:"hidden"});var i=[];e.children("[data-value]").each((function(){i.push($(this).attr("data-value"))})),t.setValue(i)}})}))}})),ie.define("dropdown_header",(function(e){var t=this;e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:e=>'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a class="'+e.closeClass+'">&times;</a></div></div>'},e),t.hook("after","setup",(()=>{var i=H(e.html(e)),s=i.querySelector("."+e.closeClass);s&&s.addEventListener("click",(e=>{V(e,!0),t.close()})),t.dropdown.insertBefore(i,t.dropdown.firstChild)}))})),ie.define("dropdown_input",(function(){var e=this,t=e.settings.controlInput||'<input type="text" autocomplete="off" class="dropdown-input" />';t=H(t),e.settings.placeholder&&ee(t,{placeholder:e.settings.placeholder}),e.settings.controlInput=t,e.settings.shouldOpen=!0,e.hook("after","setup",(()=>{ee(e.wrapper,{tabindex:e.input.disabled?"-1":e.tabIndex}),j(e.wrapper,"keypress",(t=>{if(!e.control.contains(t.target)&&!e.dropdown.contains(t.target))switch(t.keyCode){case O:return void e.onClick(t)}}));let i=H('<div class="dropdown-input-wrap">');i.appendChild(t),e.dropdown.insertBefore(i,e.dropdown.firstChild)}))})),ie.define("input_autogrow",(function(){var e=this;e.hook("after","setup",(()=>{var t=document.createElement("span"),i=e.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",e.wrapper.appendChild(t);var s=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const e of s)t.style[e]=i.style[e];var n=()=>{e.items.length>0?(t.textContent=i.value,i.style.width=t.clientWidth+"px"):i.style.width=""};n(),e.on("update item_add item_remove",n),j(i,"input",n),j(i,"keyup",n),j(i,"blur",n),j(i,"update",n)}))})),ie.define("no_backspace_delete",(function(){var e=this,t=e.deleteSelection;this.hook("instead","deleteSelection",(function(){return!!e.activeItems.length&&t.apply(e,arguments)}))})),ie.define("no_active_items",(function(e){this.hook("instead","setActiveItem",(()=>{})),this.hook("instead","selectAll",(()=>{}))})),ie.define("optgroup_columns",(function(){var e=this,t=e.onKeyDown;e.hook("instead","onKeyDown",(function(i){var s,n,o,r;if(!e.isOpen||i.keyCode!==w&&i.keyCode!==I)return t.apply(e,arguments);r=W(e.activeOption,"[data-group]"),s=Z(e.activeOption,"[data-selectable]"),(r=i.keyCode===w?r.previousSibling:r.nextSibling)&&(n=(o=r.querySelectorAll("[data-selectable]"))[Math.min(o.length-1,s)])&&e.setActiveOption(n)}))})),ie.define("remove_button",(function(e){e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},e);var t=this;if(e.append){var i='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+P(e.title)+'">'+e.label+"</a>";t.hook("after","setupTemplates",(()=>{var e=t.settings.render.item;t.settings.render.item=function(){var s=H(e.apply(t,arguments)),n=H(i);return s.appendChild(n),j(n,"mousedown",(e=>{V(e,!0)})),j(n,"click",(e=>{if(V(e,!0),!t.isLocked){var i=s.dataset.value;t.removeItem(i),t.refreshOptions(!1)}})),s}}))}})),ie.define("restore_on_backspace",(function(e){var t=this;e.text=e.text||function(e){return e[t.settings.labelField]},t.on("item_remove",(function(i){if(""===t.control_input.value.trim()){var s=t.options[i];s&&t.setTextboxValue(e.text.call(t,s))}}))})),ie.define("virtual_scroll",(function(e){const t=this,i=t.canLoad,s=t.clearActiveOption,n=t.loadCallback;var o,r={},a=!1;if(!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";function l(e){if(!("number"==typeof t.settings.maxOptions&&o.children.length>=t.settings.maxOptions))return!(!(e in r)||!r[e])}t.settings.sortField=[{field:"$order"},{field:"$score"}],t.setNextUrl=function(e,t){r[e]=t},t.getUrl=function(e){if(e in r){const t=r[e];return r[e]=!1,t}return r={},t.settings.firstUrl(e)},t.hook("instead","clearActiveOption",(()=>{if(!a)return s.call(t)})),t.hook("instead","canLoad",(e=>e in r?l(e):i.call(this,e))),t.hook("instead","loadCallback",((e,i,s)=>{a||t.clearOptions(),n.call(t,e,i,s),a=!1})),t.hook("after","refreshOptions",(()=>{const e=t.lastValue;var i;l(e)?(i=t.render("loading_more",{query:e}))&&i.setAttribute("data-selectable",""):e in r&&!o.querySelector(".no-results")&&(i=t.render("no_more_results",{query:e})),i&&(Q(i,t.settings.optionClass),o.append(i))})),t.hook("after","setup",(()=>{o=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:function(e,t){return'<div class="loading-more-results">Loading more results ... </div>'},no_more_results:function(e,t){return'<div class="no-more-results">No more results</div>'}},t.settings.render),o.addEventListener("scroll",(function(){o.clientHeight/(o.scrollHeight-o.scrollTop)<.95||l(t.lastValue)&&(a||(a=!0,t.load.call(t,t.lastValue)))}))}))})),ie}()}}]);
//# sourceMappingURL=tom-select-b0a00041d6c20eefeb27.js.map