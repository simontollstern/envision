/*! For license information please see envision.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?exports.envision=t(require("jquery")):e.envision=t(e.jQuery)}(this,(function(e){return function(){var t={807:function(){!function(){"use strict";if("undefined"!=typeof window&&window.addEventListener){var e,t,n,i=Object.create(null),o=function(){clearTimeout(t),t=setTimeout(e,100)},r=function(){},s=function(e){function t(e){var t;return void 0!==e.protocol?t=e:(t=document.createElement("a")).href=e,t.protocol.replace(/:/g,"")+t.host}var n,i,o;return window.XMLHttpRequest&&(n=new XMLHttpRequest,i=t(location),o=t(e),n=void 0===n.withCredentials&&""!==o&&o!==i?XDomainRequest||void 0:XMLHttpRequest),n},a="http://www.w3.org/1999/xlink";e=function(){var e,t,n,l,c,d,u,h,p,f,v=0;function g(){var e;0===(v-=1)&&(r(),window.addEventListener("resize",o,!1),window.addEventListener("orientationchange",o,!1),window.MutationObserver?((e=new MutationObserver(o)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),r=function(){try{e.disconnect(),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}catch(e){}}):(document.documentElement.addEventListener("DOMSubtreeModified",o,!1),r=function(){document.documentElement.removeEventListener("DOMSubtreeModified",o,!1),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}))}function m(e){return function(){!0!==i[e.base]&&(e.useEl.setAttributeNS(a,"xlink:href","#"+e.hash),e.useEl.hasAttribute("href")&&e.useEl.setAttribute("href","#"+e.hash))}}function y(e){return function(){var t,n=document.body,i=document.createElement("x");e.onload=null,i.innerHTML=e.responseText,(t=i.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",n.insertBefore(t,n.firstChild)),g()}}function b(e){return function(){e.onerror=null,e.ontimeout=null,g()}}for(r(),p=document.getElementsByTagName("use"),c=0;c<p.length;c+=1){try{t=p[c].getBoundingClientRect()}catch(e){t=!1}e=(h=(l=p[c].getAttribute("href")||p[c].getAttributeNS(a,"href")||p[c].getAttribute("xlink:href"))&&l.split?l.split("#"):["",""])[0],n=h[1],d=t&&0===t.left&&0===t.right&&0===t.top&&0===t.bottom,t&&0===t.width&&0===t.height&&!d?(p[c].hasAttribute("href")&&p[c].setAttributeNS(a,"xlink:href",l),e.length&&(!0!==(f=i[e])&&setTimeout(m({useEl:p[c],base:e,hash:n}),0),void 0===f&&void 0!==(u=s(e))&&(f=new u,i[e]=f,f.onload=y(f),f.onerror=b(f),f.ontimeout=b(f),f.open("GET",e),f.send(),v+=1))):d?e.length&&i[e]&&setTimeout(m({useEl:p[c],base:e,hash:n}),0):void 0===i[e]?i[e]=!0:i[e].onload&&(i[e].abort(),delete i[e].onload,i[e]=!0)}p="",v+=1,g()},n=function(){window.removeEventListener("load",n,!1),t=setTimeout(e,0)},"complete"!==document.readyState?window.addEventListener("load",n,!1):n()}}()},592:function(e){e.exports=function(){"use strict";function e(e,t){e.split(/\s+/).forEach((e=>{t(e)}))}class t{constructor(){this._events={}}on(t,n){e(t,(e=>{this._events[e]=this._events[e]||[],this._events[e].push(n)}))}off(t,n){var i=arguments.length;0!==i?e(t,(e=>{if(1===i)return delete this._events[e];e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(n),1)})):this._events={}}trigger(t,...n){var i=this;e(t,(e=>{if(e in i._events!=0)for(let t of i._events[e])t.apply(i,n)}))}}function n(e){return e.plugins={},class extends e{static define(t,n){e.plugins[t]={name:t,fn:n}}initializePlugins(e){var t,n,i,o=this,r=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},Array.isArray(e))for(t=0,n=e.length;t<n;t++)"string"==typeof e[t]?r.push(e[t]):(o.plugins.settings[e[t].name]=e[t].options,r.push(e[t].name));else if(e)for(i in e)e.hasOwnProperty(i)&&(o.plugins.settings[i]=e[i],r.push(i));for(;r.length;)o.require(r.shift())}loadPlugin(t){var n=this,i=n.plugins,o=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=o.fn.apply(n,[n.plugins.settings[t]||{}]),i.names.push(t)}require(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]}}}var i=[[67,67],[160,160],[192,438],[452,652],[961,961],[1019,1019],[1083,1083],[1281,1289],[1984,1984],[5095,5095],[7429,7441],[7545,7549],[7680,7935],[8580,8580],[9398,9449],[11360,11391],[42792,42793],[42802,42851],[42873,42897],[42912,42922],[64256,64260],[65313,65338],[65345,65370]];function o(e){return e.normalize("NFD").replace(/[\u0300-\u036F]/g,"").normalize("NFKD").toLowerCase()}function r(){var e={"l·":"l","ʼn":"n","æ":"ae","ø":"o","aʾ":"a","dž":"dz"},t={};return i.forEach((n=>{for(let i=n[0];i<=n[1];i++){let n=String.fromCharCode(i),o=n.normalize("NFD").replace(/[\u0300-\u036F]/g,"").normalize("NFKD");o!=n&&(o=o.toLowerCase(),o in e&&(o=e[o]),o in t||(t[o]=o+o.toUpperCase()),t[o]+=n)}})),t}var s=null;function a(e){null===s&&(s=r());for(let t in s)s.hasOwnProperty(t)&&(e=e.replace(new RegExp(t,"g"),"["+s[t]+"]"));return e}function l(e,t){if(e)return e[t]}function c(e,t){if(e){for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}}function d(e,t,n){var i,o;return e?-1===(o=(e+="").search(t.regex))?0:(i=t.string.length/e.length,0===o&&(i+=.5),i*n):0}function u(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function h(e,t){var n=e[t];n&&!Array.isArray(n)&&(e[t]=[n])}function p(e,t){if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function f(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=o(e+"").toLowerCase())>(t=o(t+"").toLowerCase())?1:t>e?-1:0}class v{constructor(e,t){this.items=void 0,this.settings=void 0,this.items=e,this.settings=t||{diacritics:!0}}tokenize(e,t,n){if(!e||!e.length)return[];const i=[],o=e.split(/\s+/);var r;return n&&(r=new RegExp("^("+Object.keys(n).map(u).join("|")+"):(.*)$")),o.forEach((e=>{let n,o=null,s=null;r&&(n=e.match(r))&&(o=n[1],e=n[2]),e.length>0&&(s=u(e),this.settings.diacritics&&(s=a(s)),t&&(s="\\b"+s),s=new RegExp(s,"i")),i.push({string:e,regex:s,field:o})})),i}getScoreFunction(e,t){var n=this.prepareSearch(e,t);return this._getScoreFunction(n)}_getScoreFunction(e){const t=e.tokens,n=t.length;if(!n)return function(){return 0};const i=e.options.fields,o=e.weights,r=i.length,s=e.getAttrFn;if(!r)return function(){return 1};const a=1===r?function(e,t){const n=i[0].field;return d(s(t,n),e,o[n])}:function(e,t){var n=0;if(e.field){const i=s(t,e.field);!e.regex&&i?n+=1/r:n+=d(i,e,1)}else p(o,((i,o)=>{n+=d(s(t,o),e,i)}));return n/r};return 1===n?function(e){return a(t[0],e)}:"and"===e.options.conjunction?function(e){for(var i,o=0,r=0;o<n;o++){if((i=a(t[o],e))<=0)return 0;r+=i}return r/n}:function(e){var i=0;return p(t,(t=>{i+=a(t,e)})),i/n}}getSortFunction(e,t){var n=this.prepareSearch(e,t);return this._getSortFunction(n)}_getSortFunction(e){var t,n,i,o,r,s;const a=this,l=e.options,c=!e.query&&l.sort_empty||l.sort,d=[],u=[],h=function(t,n){return"$score"===t?n.score:e.getAttrFn(a.items[n.id],t)};if(c)for(t=0,n=c.length;t<n;t++)(e.query||"$score"!==c[t].field)&&d.push(c[t]);if(e.query){for(s=!0,t=0,n=d.length;t<n;t++)if("$score"===d[t].field){s=!1;break}s&&d.unshift({field:"$score",direction:"desc"})}else for(t=0,n=d.length;t<n;t++)if("$score"===d[t].field){d.splice(t,1);break}for(t=0,n=d.length;t<n;t++)u.push("desc"===d[t].direction?-1:1);return(o=d.length)?1===o?(i=d[0].field,r=u[0],function(e,t){return r*f(h(i,e),h(i,t))}):function(e,t){var n,i,r;for(n=0;n<o;n++)if(r=d[n].field,i=u[n]*f(h(r,e),h(r,t)))return i;return 0}:null}prepareSearch(e,t){const n={};var i=Object.assign({},t);if(h(i,"sort"),h(i,"sort_empty"),i.fields){if(h(i,"fields"),Array.isArray(i.fields)&&"object"!=typeof i.fields[0]){var r=[];i.fields.forEach((e=>{r.push({field:e})})),i.fields=r}i.fields.forEach((e=>{n[e.field]="weight"in e?e.weight:1}))}return{options:i,query:e=o(e+"").toLowerCase().trim(),tokens:this.tokenize(e,i.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:i.nesting?c:l}}search(e,t){var n,i,o,r,s=this;return i=this.prepareSearch(e,t),t=i.options,e=i.query,r=t.score||s._getScoreFunction(i),e.length?p(s.items,((e,o)=>{n=r(e),(!1===t.filter||n>0)&&i.items.push({score:n,id:o})})):p(s.items,((e,t)=>{i.items.push({score:1,id:t})})),(o=s._getSortFunction(i))&&i.items.sort(o),i.total=i.items.length,"number"==typeof t.limit&&(i.items=i.items.slice(0,t.limit)),i}}function g(e,t){if(null!==t){if("string"==typeof t){if(!t.length)return;t=new RegExp(t,"i")}!function e(n){var i=0;if(3===n.nodeType){var o=n.data.search(t);if(o>=0&&n.data.length>0){var r=n.data.match(t),s=document.createElement("span");s.className="highlight";var a=n.splitText(o);a.splitText(r[0].length);var l=a.cloneNode(!0);s.appendChild(l),a.parentNode.replaceChild(s,a),i=1}}else if(1===n.nodeType&&n.childNodes&&!/(script|style)/i.test(n.tagName)&&("highlight"!==n.className||"SPAN"!==n.tagName))for(var c=0;c<n.childNodes.length;++c)c+=e(n.childNodes[c]);return i}(e)}}function m(e){var t=document.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,(function(e,t){var n=e.parentNode;n.replaceChild(e.firstChild,e),n.normalize()}))}const y=65,b=13,w=27,_=37,k=38,C=39,O=40,x=8,E=46,I=9,S="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey";var A={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,closeAfterSelect:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-control",inputClass:"ts-input",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:null,copyClassesToDropdown:!0,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return e.length>0},render:{}};function T(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""}function F(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function P(e,t){var n;return function(i,o){var r=this;n&&(r.loading=Math.max(r.loading-1,0)),clearTimeout(n),n=setTimeout((function(){n=null,r.loadedSearches[i]=!0,e.call(r,i,o)}),t)}}function L(e,t,n){var i,o=e.trigger,r={};for(i in e.trigger=function(){var n=arguments[0];if(-1===t.indexOf(n))return o.apply(e,arguments);r[n]=arguments},n.apply(e,[]),e.trigger=o,r)o.apply(e,r[i])}function D(e){return{start:e.selectionStart,length:e.selectionEnd-e.selectionStart}}function j(e,t=!1){e&&(e.preventDefault(),t&&e.stopPropagation())}function N(e,t,n,i){e.addEventListener(t,n,i)}function M(e,t){return!!t&&!!t[e]&&1==(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0)}function V(e,t){const n=e.getAttribute("id");return n||(e.setAttribute("id",t),t)}function H(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'")}function q(e,t){var n=Object.assign({},A,t),i=n.dataAttr,o=n.labelField,r=n.valueField,s=n.disabledField,a=n.optgroupField,l=n.optgroupLabelField,c=n.optgroupValueField,d=e.tagName.toLowerCase(),u=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");if(!u&&!n.allowEmptyOption){let t=e.querySelector('option[value=""]');t&&(u=t.textContent)}var h={placeholder:u,options:[],optgroups:[],items:[],maxItems:null},p=()=>{var t,s,a=e.getAttribute(i);if(a){h.options=JSON.parse(a);for(const e of h.options)h.items.push(e[r])}else{var l=e.value.trim()||"";if(!n.allowEmptyOption&&!l.length)return;t=l.split(n.delimiter);for(const e of t)(s={})[o]=e,s[r]=e,h.options.push(s);h.items=t}};return"select"===d?(()=>{var t,d=h.options,u={},p=1,f=e=>{var t=Object.assign({},e.dataset),n=i&&t[i];return"string"==typeof n&&n.length&&(t=Object.assign(t,JSON.parse(n))),t},v=(e,t)=>{var i=T(e.value);if(i||n.allowEmptyOption)if(u.hasOwnProperty(i)){if(t){var l=u[i][a];l?Array.isArray(l)?l.push(t):u[i][a]=[l,t]:u[i][a]=t}}else{var c=f(e);c[o]=c[o]||e.textContent,c[r]=c[r]||i,c[s]=c[s]||e.disabled,c[a]=c[a]||t,c.$option=e,u[i]=c,d.push(c),e.selected&&h.items.push(i)}},g=e=>{var t,n;(n=f(e))[l]=n[l]||e.getAttribute("label")||"",n[c]=n[c]||p++,n[s]=n[s]||e.disabled,h.optgroups.push(n),t=n[c];for(const n of e.children)v(n,t)};h.maxItems=e.hasAttribute("multiple")?null:1;for(const n of e.children)"optgroup"===(t=n.tagName.toLowerCase())?g(n):"option"===t&&v(n)})():p(),Object.assign({},A,h,t)}function B(e){if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(e.indexOf("<")>-1){let t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}return document.querySelector(e)}function R(e){return e.replace(/['"\\]/g,"\\$&")}function Q(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)}function U(e,t){Object.assign(e.style,t)}function z(e,...t){var n=W(t);(e=G(e)).map((e=>{n.map((t=>{e.classList.add(t)}))}))}function K(e,...t){var n=W(t);(e=G(e)).map((e=>{n.map((t=>{e.classList.remove(t)}))}))}function W(e){var t=[];for(let n of e)"string"==typeof n&&(n=n.trim().split(/[\11\12\14\15\40]/)),Array.isArray(n)&&(t=t.concat(n));return t.filter(Boolean)}function G(e){return Array.isArray(e)||(e=[e]),e}function Y(e,t,n){if(!n||n.contains(e))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}}function X(e,t){return t>0?e[e.length-1]:e[0]}function J(e){return 0===Object.keys(e).length}function Z(e,t){if(!e)return-1;t=t||e.nodeName;for(var n=0;e=e.previousElementSibling;)e.matches(t)&&n++;return n}function ee(e,t){for(const n in t)e.setAttribute(n,t[n])}var te=0;class ne extends(n(t)){constructor(e,t){var n;super(),this.control_input=void 0,this.wrapper=void 0,this.dropdown=void 0,this.control=void 0,this.dropdown_content=void 0,this.order=0,this.settings=void 0,this.input=void 0,this.tabIndex=void 0,this.is_select_tag=void 0,this.rtl=void 0,this.inputId=void 0,this._destroy=void 0,this.sifter=void 0,this.tab_key=!1,this.isOpen=!1,this.isDisabled=!1,this.isRequired=void 0,this.isInvalid=!1,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.hasOptions=!1,this.currentResults=null,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.renderCache={item:{},option:{}},te++;var i=B(e);if(i.tomselect)throw new Error("Tom Select already initialized on this element");i.tomselect=this,n=(window.getComputedStyle&&window.getComputedStyle(i,null)).getPropertyValue("direction"),this.settings=q(i,t),this.input=i,this.tabIndex=i.tabIndex||0,this.is_select_tag="select"===i.tagName.toLowerCase(),this.rtl=/rtl/i.test(n),this.inputId=V(i,"tomselect-"+te),this.isRequired=i.required,this.sifter=new v(this.options,{diacritics:this.settings.diacritics}),this.setupOptions(this.settings.options,this.settings.optgroups),delete this.settings.optgroups,delete this.settings.options,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),"boolean"!=typeof this.settings.hidePlaceholder&&(this.settings.hidePlaceholder="multi"!==this.settings.mode);var o=this.settings.createFilter;"function"!=typeof o&&("string"==typeof o&&(o=new RegExp(o)),o instanceof RegExp?this.settings.createFilter=e=>o.test(e):this.settings.createFilter=()=>!0),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()}setup(){var e,t,n,i,o,r,s,a,l,c=this,d=c.settings,h=c.input;const p={passive:!0},f=c.inputId+"-ts-dropdown";if(r=c.settings.mode,s=h.getAttribute("class")||"",z(e=B("<div>"),d.wrapperClass,s,r),z(t=B('<div class="items">'),d.inputClass),e.append(t),z(i=c.render("dropdown"),d.dropdownClass,r),z(o=B(`<div role="listbox" id="${f}" tabindex="-1">`),d.dropdownContentClass),i.append(o),B(d.dropdownParent||e).appendChild(i),d.controlInput)n=B(d.controlInput);else{n=B('<input type="text" autocomplete="off" size="1" />');var v=["autocorrect","autocapitalize","autocomplete"];for(const e of v)h.getAttribute(e)&&ee(n,{[e]:h.getAttribute(e)})}d.controlInput||(n.tabIndex=h.disabled?-1:c.tabIndex,t.appendChild(n)),ee(n,{role:"combobox",haspopup:"listbox","aria-expanded":"false","aria-controls":f}),l=V(n,c.inputId+"-tomselected");let g="label[for='"+R(c.inputId)+"']",m=document.querySelector(g);m&&(ee(m,{for:l}),ee(o,{"aria-labelledby":V(m,c.inputId+"-ts-label")})),c.settings.copyClassesToDropdown&&z(i,s),e.style.width=h.style.width,c.plugins.names.length&&(a="plugin-"+c.plugins.names.join(" plugin-"),z([e,i],a)),(null===d.maxItems||d.maxItems>1)&&c.is_select_tag&&ee(h,{multiple:"multiple"}),c.settings.placeholder&&ee(n,{placeholder:d.placeholder}),!c.settings.splitOn&&c.settings.delimiter&&(c.settings.splitOn=new RegExp("\\s*"+u(c.settings.delimiter)+"+\\s*")),this.settings.load&&this.settings.loadThrottle&&(this.settings.load=P(this.settings.load,this.settings.loadThrottle)),c.control=t,c.control_input=n,c.wrapper=e,c.dropdown=i,c.dropdown_content=o,c.control_input.type=h.type,N(i,"click",(e=>{const t=Y(e.target,"[data-selectable]");t&&c.onOptionSelect(e,t)})),N(t,"click",(e=>{var i=Y(e.target,"."+c.settings.itemClass,t);i&&c.onItemSelect(e,i)||""==n.value&&c.onClick(e)})),N(n,"mousedown",(e=>{""!==n.value&&e.stopPropagation()})),N(n,"keydown",(e=>c.onKeyDown(e))),N(n,"keyup",(e=>c.onKeyUp(e))),N(n,"keypress",(e=>c.onKeyPress(e))),N(n,"resize",(()=>c.positionDropdown()),p),N(n,"blur",(e=>c.onBlur(e))),N(n,"focus",(e=>c.onFocus(e))),N(n,"paste",(e=>c.onPaste(e)));const y=t=>{if(!e.contains(t.target)&&!i.contains(t.target))return c.isFocused&&c.blur(),void c.inputState();j(t,!0)};var b=()=>{c.isOpen&&c.positionDropdown()};N(document,"mousedown",y),N(window,"sroll",b,p),N(window,"resize",b,p),c._destroy=()=>{document.removeEventListener("mousedown",y),window.removeEventListener("sroll",b),window.removeEventListener("resize",b)},this.revertSettings={innerHTML:h.innerHTML,tabIndex:h.tabIndex},h.tabIndex=-1,ee(h,{hidden:"hidden"}),h.insertAdjacentElement("afterend",c.wrapper),c.setValue(d.items),delete d.items,N(h,"invalid",(e=>{j(e),c.isInvalid||(c.isInvalid=!0,c.refreshState())})),c.updateOriginalInput(),c.refreshItems(),c.refreshState(),c.inputState(),c.isSetup=!0,h.disabled&&c.disable(),c.on("change",this.onChange),z(h,"tomselected"),c.trigger("initialize"),!0===d.preload&&c.load("")}setupOptions(e=[],t=[]){for(const t of e)this.registerOption(t);for(const e of t)this.registerOptionGroup(e)}setupTemplates(){var e=this,t=e.settings.labelField,n=e.settings.optgroupLabelField,i={optgroup:(e,t)=>{let n=document.createElement("div");return n.className="optgroup",n.appendChild(e.options),n},optgroup_header:(e,t)=>'<div class="optgroup-header">'+t(e[n])+"</div>",option:(e,n)=>"<div>"+n(e[t])+"</div>",item:(e,n)=>"<div>"+n(e[t])+"</div>",option_create:(e,t)=>'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>",no_results:(e,t)=>'<div class="no-results">No results found</div>',loading:(e,t)=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};e.settings.render=Object.assign({},i,e.settings.render)}setupCallbacks(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)(t=this.settings[n[e]])&&this.on(e,t)}onClick(e){var t=this;if(t.activeItems.length>0)return t.clearActiveItems(),void t.focus();t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(e){}onChange(){Q(this.input,"input"),Q(this.input,"change")}onPaste(e){var t=this;t.isFull()||t.isInputHidden||t.isLocked?j(e):t.settings.splitOn&&setTimeout((()=>{var e=t.inputValue();if(e.match(t.settings.splitOn)){var n=e.trim().split(t.settings.splitOn);for(const e of n)t.createItem(e)}}),0)}onKeyPress(e){var t=this;if(!t.isLocked){var n=String.fromCharCode(e.keyCode||e.which);return t.settings.create&&"multi"===t.settings.mode&&n===t.settings.delimiter?(t.createItem(),void j(e)):void 0}j(e)}onKeyDown(e){var t=this;if(t.isLocked)e.keyCode!==I&&j(e);else{switch(e.keyCode){case y:if(M(S,e))return void t.selectAll();break;case w:return t.isOpen&&(j(e,!0),t.close()),void t.clearActiveItems();case O:if(!t.isOpen&&t.hasOptions)t.open();else if(t.activeOption){let e=t.getAdjacent(t.activeOption,1);e&&t.setActiveOption(e)}return void j(e);case k:if(t.activeOption){let e=t.getAdjacent(t.activeOption,-1);e&&t.setActiveOption(e)}return void j(e);case b:return void(t.isOpen&&t.activeOption?(t.onOptionSelect(e,t.activeOption),j(e)):t.settings.create&&t.createItem()&&j(e));case _:return void t.advanceSelection(-1,e);case C:return void t.advanceSelection(1,e);case I:return void(t.settings.selectOnTab&&(t.isOpen&&t.activeOption&&(t.tab_key=!0,t.onOptionSelect(e,t.activeOption),j(e),t.tab_key=!1),t.settings.create&&t.createItem()&&j(e)));case x:case E:return void t.deleteSelection(e)}t.isInputHidden&&!M(S,e)&&j(e)}}onKeyUp(e){var t=this;if(t.isLocked)j(e);else{var n=t.inputValue();t.lastValue!==n&&(t.lastValue=n,t.settings.shouldLoad.call(t,n)&&t.load(n),t.refreshOptions(),t.trigger("type",n))}}onFocus(e){var t=this,n=t.isFocused;if(t.isDisabled)return t.blur(),void j(e);t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.load(""),n||t.trigger("focus"),t.activeItems.length||(t.showInput(),t.setActiveItem(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}onBlur(e){var t=this;if(t.isFocused){t.isFocused=!1,t.ignoreFocus=!1;var n=()=>{t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")};t.settings.create&&t.settings.createOnBlur?t.createItem(null,!1,n):n()}}onOptionSelect(e,t){var n,i=this;t&&(t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?i.createItem(null,!0,(()=>{i.settings.closeAfterSelect&&i.close()})):void 0!==(n=t.dataset.value)&&(i.lastQuery=null,i.addItem(n),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&i.setActiveOption(i.getOption(n)))))}onItemSelect(e,t){var n=this;return!n.isLocked&&"multi"===n.settings.mode&&(j(e),n.setActiveItem(t,e),!0)}canLoad(e){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(e)}load(e){const t=this;if(!t.canLoad(e))return;z(t.wrapper,t.settings.loadingClass),t.loading++;const n=t.loadCallback.bind(t,e);t.settings.load.call(t,e,n)}loadCallback(e,t,n){const i=this;i.loading=Math.max(i.loading-1,0),i.lastQuery=null,i.clearActiveOption(),i.setupOptions(t,n),i.refreshOptions(i.isFocused&&!i.isInputHidden),i.loading||K(i.wrapper,i.settings.loadingClass),i.trigger("load",t,n)}setTextboxValue(e=""){var t=this.control_input;t.value!==e&&(t.value=e,Q(t,"update"),this.lastValue=e)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(e,t){L(this,t?[]:["change"],(()=>{this.clear(t),this.addItems(e,t)}))}setMaxItems(e){0===e&&(e=null),this.settings.maxItems=e,this.refreshState()}setActiveItem(e,t){var n,i,o,r,s,a,l=this;if("single"!==l.settings.mode){if(!e)return l.clearActiveItems(),void(l.isFocused&&l.showInput());if("click"===(n=t&&t.type.toLowerCase())&&M("shiftKey",t)&&l.activeItems.length){for(a=l.getLastActive(),(o=Array.prototype.indexOf.call(l.control.children,a))>(r=Array.prototype.indexOf.call(l.control.children,e))&&(s=o,o=r,r=s),i=o;i<=r;i++)e=l.control.children[i],-1===l.activeItems.indexOf(e)&&l.setActiveItemClass(e);j(t)}else"click"===n&&M(S,t)||"keydown"===n&&M("shiftKey",t)?e.classList.contains("active")?l.removeActiveItem(e):l.setActiveItemClass(e):(l.clearActiveItems(),l.setActiveItemClass(e));l.hideInput(),l.isFocused||l.focus()}}setActiveItemClass(e){var t=this.control.querySelector(".last-active");t&&K(t,"last-active"),z(e,"active last-active"),-1==this.activeItems.indexOf(e)&&this.activeItems.push(e)}removeActiveItem(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),K(e,"active")}clearActiveItems(){K(this.activeItems,"active"),this.activeItems=[]}setActiveOption(e){var t,n,i;if(e===this.activeOption)return;if(this.clearActiveOption(),!e)return;this.activeOption=e,ee(this.control_input,{"aria-activedescendant":e.getAttribute("id")}),ee(e,{"aria-selected":"true"}),z(e,"active"),t=this.dropdown_content.clientHeight;let o=this.dropdown_content.scrollTop||0;n=this.activeOption.offsetHeight,(i=this.activeOption.getBoundingClientRect().top-this.dropdown_content.getBoundingClientRect().top+o)+n>t+o?this.dropdown_content.scrollTop=i-t+n:i<o&&(this.dropdown_content.scrollTop=i)}clearActiveOption(){this.activeOption&&(K(this.activeOption,"active"),this.activeOption.removeAttribute("aria-selected")),this.activeOption=null,this.control_input.removeAttribute("aria-activedescendant")}selectAll(){"single"!==this.settings.mode&&(this.activeItems=this.controlChildren(),this.activeItems.length&&(z(this.activeItems,"active"),this.hideInput(),this.close()),this.focus())}inputState(){var e=this;e.settings.controlInput||(e.activeItems.length>0||!e.isFocused&&this.settings.hidePlaceholder&&e.items.length>0?(e.setTextboxValue(),e.isInputHidden=!0,z(e.wrapper,"input-hidden")):(e.isInputHidden=!1,K(e.wrapper,"input-hidden")))}hideInput(){this.inputState()}showInput(){this.inputState()}inputValue(){return this.control_input.value.trim()}focus(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.control_input.focus(),setTimeout((()=>{e.ignoreFocus=!1,e.onFocus()}),0))}blur(){this.control_input.blur(),this.onBlur(null)}getScoreFunction(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}getSearchOptions(){var e=this.settings,t=e.sortField;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}search(e){var t,n,i,o=this,r=o.settings,s=this.getSearchOptions();if(r.score&&"function"!=typeof(i=o.settings.score.call(o,e)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,n=o.sifter.search(e,Object.assign(s,{score:i})),o.currentResults=n):n=Object.assign({},o.currentResults),r.hideSelected)for(t=n.items.length-1;t>=0;t--)-1!==o.items.indexOf(T(n.items[t].id))&&n.items.splice(t,1);return n}refreshOptions(e=!0){var t,n,i,o,r,s,a,l,c,d,u,h,p=this,f=p.inputValue(),v=p.search(f),y=p.activeOption&&T(p.activeOption.dataset.value),b=p.settings.shouldOpen||!1;for(o=v.items.length,"number"==typeof p.settings.maxOptions&&(o=Math.min(o,p.settings.maxOptions)),o>0&&(b=!0),h={},r=[],t=0;t<o;t++){let e=p.options[v.items[t].id],o=T(e[p.settings.valueField]),l=p.getOption(o);for(l||(l=p.render("option",e)),p.settings.hideSelected||l.classList.toggle("selected",p.items.includes(o)),s=e[p.settings.optgroupField]||"",n=0,i=(a=Array.isArray(s)?s:[s])&&a.length;n<i;n++)s=a[n],p.optgroups.hasOwnProperty(s)||(s=""),h.hasOwnProperty(s)||(h[s]=document.createDocumentFragment(),r.push(s)),n>0&&(l=l.cloneNode(!0),K(l,"active"),l.removeAttribute("aria-selected")),h[s].appendChild(l)}for(s of(this.settings.lockOptgroupOrder&&r.sort(((e,t)=>(p.optgroups[e]&&p.optgroups[e].$order||0)-(p.optgroups[t]&&p.optgroups[t].$order||0))),l=document.createDocumentFragment(),r))if(p.optgroups.hasOwnProperty(s)&&h[s].children.length){let e=document.createDocumentFragment();e.append(p.render("optgroup_header",p.optgroups[s])),e.append(h[s]);let t=p.render("optgroup",{group:p.optgroups[s],options:e});l.append(t)}else l.append(h[s]);if(p.dropdown_content.innerHTML="",p.dropdown_content.append(l),p.settings.highlight&&(m(p.dropdown_content),v.query.length&&v.tokens.length))for(const e of v.tokens)g(p.dropdown_content,e.regex);var w=e=>{let t=p.render(e,{input:f});return t&&(b=!0,p.dropdown_content.insertBefore(t,p.dropdown_content.firstChild)),t};if(p.settings.shouldLoad.call(p,f)?p.loading?w("loading"):0===v.items.length&&w("no_results"):w("not_loading"),(c=p.canCreate(f))&&(u=w("option_create")),p.hasOptions=v.items.length>0||c,b){if(v.items.length>0){if(!(d=y&&p.getOption(y))&&"single"===p.settings.mode&&p.items.length&&(d=p.getOption(p.items[0])),!d||!p.dropdown_content.contains(d)){let e=0;u&&!p.settings.addPrecedence&&(e=1),d=p.selectable()[e]}}else d=u;p.setActiveOption(d),e&&!p.isOpen&&p.open()}else p.clearActiveOption(),e&&p.isOpen&&p.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(e){var t,n=this;if(Array.isArray(e))for(const t of e)n.addOption(t);else(t=n.registerOption(e))&&(n.userOptions[t]=!0,n.lastQuery=null,n.trigger("option_add",t,e))}registerOption(e){var t=T(e[this.settings.valueField]);return null!==t&&!this.options.hasOwnProperty(t)&&(e.$order=e.$order||++this.order,e.$id=this.inputId+"-opt-"+e.$order,this.options[t]=e,t)}registerOptionGroup(e){var t=T(e[this.settings.optgroupValueField]);return null!==t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}addOptionGroup(e,t){var n;t[this.settings.optgroupValueField]=e,(n=this.registerOptionGroup(t))&&this.trigger("optgroup_add",n,t)}removeOptionGroup(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(e,t){var n,i,o,r,s,a,l,c=this;if(e=T(e),o=T(t[c.settings.valueField]),null!==e&&c.options.hasOwnProperty(e)){if("string"!=typeof o)throw new Error("Value must be set in option data");l=c.options[e].$order,o!==e&&(delete c.options[e],-1!==(r=c.items.indexOf(e))&&c.items.splice(r,1,o)),t.$order=t.$order||l,c.options[o]=t,s=c.renderCache.item,a=c.renderCache.option,s&&(delete s[e],delete s[o]),a&&(delete a[e],delete a[o]),-1!==c.items.indexOf(o)&&(n=c.getItem(e),i=c.render("item",t),n.classList.contains("active")&&z(i,"active"),n.parentNode.insertBefore(i,n),n.remove()),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}}removeOption(e,t){var n=this;e=T(e);var i=n.renderCache.item,o=n.renderCache.option;i&&delete i[e],o&&delete o[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)}clearOptions(){this.loadedSearches={},this.userOptions={},this.clearCache();var e={};for(let t in this.options)this.options.hasOwnProperty(t)&&this.items.indexOf(t)>=0&&(e[t]=this.options[t]);this.options=this.sifter.items=e,this.lastQuery=null,this.trigger("option_clear")}getOption(e){if(e=T(e)){const t=this.dropdown_content.querySelector(`[data-selectable][data-value="${H(e)}"]`);if(t)return t}if(this.renderCache.option.hasOwnProperty(e))return this.renderCache.option[e]}getAdjacent(e,t,n="option"){var i,o=this;if(e){i="item"==n?o.controlChildren():o.dropdown_content.querySelectorAll("[data-selectable]");for(let n=0;n<i.length;n++)if(i[n]==e)return t>0?i[n+1]:i[n-1]}}getItem(e){if(e=T(e))return e=H(e),this.control.querySelector(`[data-value="${e}"]`)}addItems(e,t){var n=this;n.buffer=document.createDocumentFragment();for(const e of n.control.children)n.buffer.appendChild(e);var i=Array.isArray(e)?e:[e];for(let e=0,o=(i=i.filter((e=>-1===n.items.indexOf(e)))).length;e<o;e++)n.isPending=e<o-1,n.addItem(i[e],t);var o=n.control;o.insertBefore(n.buffer,o.firstChild),n.buffer=null}addItem(e,t){L(this,t?[]:["change"],(()=>{var n,i,o=this,r=o.settings.mode;if(e=T(e),(-1===o.items.indexOf(e)||("single"===r&&o.close(),"single"!==r&&o.settings.duplicates))&&o.options.hasOwnProperty(e)&&("single"===r&&o.clear(t),"multi"!==r||!o.isFull())){if(n=o.render("item",o.options[e]),o.control.contains(n)&&(n=n.cloneNode(!0)),i=o.isFull(),o.items.splice(o.caretPos,0,e),o.insertAtCaret(n),o.isSetup){let i=o.selectable();if(!o.isPending){let t=o.getOption(e),n=o.getAdjacent(t,1);o.refreshOptions(o.isFocused&&"single"!==r),n&&o.setActiveOption(n)}!i.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",e,n),o.isPending||o.updateOriginalInput({silent:t})}(!o.isPending||!i&&o.isFull())&&o.refreshState()}}))}removeItem(e,t){var n,i,o=this,r=o.getItem(e);r&&(e=T(r.dataset.value),-1!==(n=o.items.indexOf(e))&&(r.remove(),r.classList.contains("active")&&(i=o.activeItems.indexOf(r),o.activeItems.splice(i,1),K(r,"active")),o.items.splice(n,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(e)&&o.removeOption(e,t),n<o.caretPos&&o.setCaret(o.caretPos-1),o.updateOriginalInput({silent:t}),o.refreshState(),o.positionDropdown(),o.trigger("item_remove",e,r)))}createItem(e,t=!0,n){var i,o=this,r=o.caretPos;if(e=e||o.inputValue(),"function"!=typeof n&&(n=()=>{}),!o.canCreate(e))return n(),!1;o.lock();var s=!1,a=e=>{if(o.unlock(),!e||"object"!=typeof e)return n();var i=T(e[o.settings.valueField]);if("string"!=typeof i)return n();o.setTextboxValue(),o.addOption(e),o.setCaret(r),o.addItem(i),o.refreshOptions(t&&"single"!==o.settings.mode),n(e),s=!0};return i="function"==typeof o.settings.create?o.settings.create.call(this,e,a):{[o.settings.labelField]:e,[o.settings.valueField]:e},s||a(i),!0}refreshItems(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}refreshState(){var e=this;e.refreshValidityState();var t=e.isFull(),n=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);var i=e.control.classList;i.toggle("focus",e.isFocused),i.toggle("disabled",e.isDisabled),i.toggle("required",e.isRequired),i.toggle("invalid",e.isInvalid),i.toggle("locked",n),i.toggle("full",t),i.toggle("not-full",!t),i.toggle("input-active",e.isFocused&&!e.isInputHidden),i.toggle("dropdown-active",e.isOpen),i.toggle("has-options",J(e.options)),i.toggle("has-items",e.items.length>0)}refreshValidityState(){var e=this;if(e.input.checkValidity){this.isRequired&&(e.input.required=!0);var t=!e.input.checkValidity();e.isInvalid=t,e.control_input.required=t,this.isRequired&&(e.input.required=!t)}}isFull(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}updateOriginalInput(e={}){var t,n,i=this;if(i.is_select_tag)for(i.input.querySelectorAll("option[selected]").forEach((e=>{-1==i.items.indexOf(e.value)&&(e.selected=!1,e.removeAttribute("selected"))})),t=i.items.length-1;t>=0;t--){var o;if(n=i.items[t],!(o=i.options[n].$option)){const e=i.options[n][i.settings.labelField]||"";o=B('<option value="'+F(n)+'">'+F(e)+"</option>"),i.options[n].$option=o}o.selected=!0,ee(o,{selected:"true"}),i.input.prepend(o)}else i.input.value=i.getValue();i.isSetup&&(e.silent||i.trigger("change",i.getValue()))}open(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.isOpen=!0,ee(e.control_input,{"aria-expanded":"true"}),e.refreshState(),U(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),U(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}close(e=!0){var t=this,n=t.isOpen;e&&(t.setTextboxValue(),"single"===t.settings.mode&&t.items.length&&(t.hideInput(),t.tab_key||t.blur())),t.isOpen=!1,ee(t.control_input,{"aria-expanded":"false"}),U(t.dropdown,{display:"none"}),t.clearActiveOption(),t.refreshState(),n&&t.trigger("dropdown_close",t.dropdown)}positionDropdown(){if("body"===this.settings.dropdownParent){var e=this.control,t=e.getBoundingClientRect(),n=e.offsetHeight+t.top+window.scrollY,i=t.left+window.scrollX;U(this.dropdown,{width:t.width+"px",top:n+"px",left:i+"px"})}}clear(e){var t=this;if(t.items.length){var n=t.controlChildren();for(const e of n)e.remove();t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear")}}insertAtCaret(e){var t=this,n=Math.min(t.caretPos,t.items.length),i=t.buffer||t.control;0===n?i.insertBefore(e,i.firstChild):i.insertBefore(e,i.children[n]),t.setCaret(n+1)}deleteSelection(e){var t,n,i,o,r=this;if(t=e&&e.keyCode===x?-1:1,n=D(r.control_input),i=[],r.activeItems.length){o=Z(X(r.activeItems,t)),t>0&&o++;for(const e of r.activeItems)i.push(e.dataset.value)}else(r.isFocused||"single"===r.settings.mode)&&r.items.length&&(t<0&&0===n.start&&0===n.length?i.push(r.items[r.caretPos-1]):t>0&&n.start===r.inputValue().length&&i.push(r.items[r.caretPos]));if(!i.length||"function"==typeof r.settings.onDelete&&!1===r.settings.onDelete.call(r,i,e))return!1;for(j(e,!0),void 0!==o&&r.setCaret(o);i.length;)r.removeItem(i.pop());return r.showInput(),r.positionDropdown(),r.refreshOptions(!1),!0}advanceSelection(e,t){var n,i,o,r=this;r.rtl&&(e*=-1),r.inputValue().length||(M(S,t)||M("shiftKey",t)?(o=(i=r.getLastActive(e))?i.classList.contains("active")?r.getAdjacent(i,e,"item"):i:e>0?r.control_input.nextElementSibling:r.control_input.previousElementSibling)&&(o.classList.contains("active")&&r.removeActiveItem(i),r.setActiveItemClass(o)):r.isFocused&&!r.activeItems.length?r.setCaret(r.caretPos+e):(i=r.getLastActive(e))&&(n=Z(i),r.setCaret(e>0?n+1:n),r.setActiveItem()))}getLastActive(e){let t=this.control.querySelector(".last-active");if(t)return t;var n=this.control.querySelectorAll(".active");return n?X(n,e):void 0}setCaret(e){var t=this;"single"===t.settings.mode||t.settings.controlInput?e=t.items.length:(e=Math.max(0,Math.min(t.items.length,e)))==t.caretPos||t.isPending||t.controlChildren().forEach(((n,i)=>{i<e?t.control_input.insertAdjacentElement("beforebegin",n):t.control.appendChild(n)})),t.caretPos=e}controlChildren(){return Array.from(this.control.getElementsByClassName(this.settings.itemClass))}lock(){this.close(),this.isLocked=!0,this.refreshState()}unlock(){this.isLocked=!1,this.refreshState()}disable(){var e=this;e.input.disabled=!0,e.control_input.disabled=!0,e.control_input.tabIndex=-1,e.isDisabled=!0,e.lock()}enable(){var e=this;e.input.disabled=!1,e.control_input.disabled=!1,e.control_input.tabIndex=e.tabIndex,e.isDisabled=!1,e.unlock()}destroy(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,K(e.input,"tomselected"),e.input.removeAttribute("hidden"),e.input.required=this.isRequired,e._destroy(),delete e.input.tomselect}render(e,t){var n,i,o=this;if(("option"===e||"item"===e)&&(n=T(t[o.settings.valueField]),o.renderCache[e].hasOwnProperty(n)))return o.renderCache[e][n];var r=o.settings.render[e];return"function"!=typeof r?null:(i=r.call(this,t,F))?(i=B(i),"option"===e||"option_create"===e?t[o.settings.disabledField]?ee(i,{"aria-disabled":"true"}):ee(i,{"data-selectable":""}):"optgroup"===e&&(ee(i,{"data-group":t.group[o.settings.optgroupValueField]}),t.group[o.settings.disabledField]&&ee(i,{"data-disabled":""})),"option"!==e&&"item"!==e||(ee(i,{"data-value":n}),"item"===e?z(i,o.settings.itemClass):(z(i,o.settings.optionClass),ee(i,{role:"option",id:t.$id})),o.renderCache[e][n]=i),i):i}clearCache(e){var t=this;void 0===e?t.renderCache={item:{},option:{}}:t.renderCache[e]={}}canCreate(e){return this.settings.create&&e.length&&this.settings.createFilter.call(this,e)}hook(e,t,n){var i=this,o=i[t];i[t]=function(){var t,r;return"after"===e&&(t=o.apply(i,arguments)),r=n.apply(i,arguments),"instead"===e?r:("before"===e&&(t=o.apply(i,arguments)),t)}}}return ne.define("change_listener",(function(e){var t=this,n=!1;N(t.input,"change",(()=>{if(n)n=!1;else{n=!0;var e=q(t.input,{});t.setupOptions(e.options,e.optgroups),t.setValue(e.items)}}))})),ne.define("checkbox_options",(function(e){var t=this,n=t.onOptionSelect;t.settings.hideSelected=!1;var i=function(e){setTimeout((()=>{var t=e.querySelector("input");e.classList.contains("selected")?t.checked=!0:t.checked=!1}),1)};t.hook("after","setupTemplates",(()=>{var e=t.settings.render.option;t.settings.render.option=function(n){var i=B(e.apply(t,arguments)),o=document.createElement("input");o.addEventListener("click",(function(e){j(e)})),o.type="checkbox";var r=T(n[t.settings.valueField]);return t.items.indexOf(r)>-1&&(o.checked=!0),i.prepend(o),i}})),t.on("item_remove",(e=>{var n=t.getOption(e);n&&(n.classList.remove("selected"),i(n))})),t.hook("instead","onOptionSelect",(function(e,o){if(o.classList.contains("selected"))return o.classList.remove("selected"),t.removeItem(o.dataset.value),t.refreshOptions(),void j(e,!0);n.apply(t,arguments),i(o)}))})),ne.define("clear_button",(function(e){var t=this;e=Object.assign({className:"clear-button",title:"Clear All",html:e=>`<div class="${e.className}" title="${e.title}">&times;</div>`},e),t.hook("after","setup",(()=>{var n=B(e.html(e));n.addEventListener("click",(e=>{for(;t.items.length>0;)t.removeItem(t.items[0],!0);t.updateOriginalInput(),e.preventDefault(),e.stopPropagation()})),t.control.appendChild(n)}))})),ne.define("drag_drop",(function(e){var t=this;if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===t.settings.mode){var n=t.lock,i=t.unlock;t.hook("instead","lock",(function(){var e=t.control.dataset.sortable;return e&&e.disable(),n.apply(t,arguments)})),t.hook("instead","unlock",(function(){var e=t.control.dataset.sortable;return e&&e.enable(),i.apply(t,arguments)})),t.hook("after","setup",(()=>{var e=$(t.control).sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:(t,n)=>{n.placeholder.css("width",n.helper.css("width")),e.css({overflow:"visible"})},stop:()=>{e.css({overflow:"hidden"});var n=[];e.children("[data-value]").each((function(){n.push($(this).attr("data-value"))})),t.setValue(n)}})}))}})),ne.define("dropdown_header",(function(e){var t=this;e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:e=>'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a class="'+e.closeClass+'">&times;</a></div></div>'},e),t.hook("after","setup",(()=>{var n=B(e.html(e)),i=n.querySelector("."+e.closeClass);i&&i.addEventListener("click",(e=>{j(e,!0),t.close()})),t.dropdown.insertBefore(n,t.dropdown.firstChild)}))})),ne.define("dropdown_input",(function(){var e=this,t=e.settings.controlInput||'<input type="text" autocomplete="off" class="dropdown-input" />';t=B(t),e.settings.placeholder&&ee(t,{placeholder:e.settings.placeholder}),e.settings.controlInput=t,e.settings.shouldOpen=!0,e.hook("after","setup",(()=>{ee(e.wrapper,{tabindex:e.input.disabled?"-1":e.tabIndex}),N(e.wrapper,"keypress",(t=>{if(!e.control.contains(t.target)&&!e.dropdown.contains(t.target))switch(t.keyCode){case b:return void e.onClick(t)}}));let n=B('<div class="dropdown-input-wrap">');n.appendChild(t),e.dropdown.insertBefore(n,e.dropdown.firstChild)}))})),ne.define("input_autogrow",(function(){var e=this;e.hook("after","setup",(()=>{var t=document.createElement("span"),n=e.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",e.wrapper.appendChild(t);var i=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const e of i)t.style[e]=n.style[e];var o=()=>{e.items.length>0?(t.textContent=n.value,n.style.width=t.clientWidth+"px"):n.style.width=""};o(),e.on("update item_add item_remove",o),N(n,"input",o),N(n,"keyup",o),N(n,"blur",o),N(n,"update",o)}))})),ne.define("no_backspace_delete",(function(){var e=this,t=e.deleteSelection;this.hook("instead","deleteSelection",(function(){return!!e.activeItems.length&&t.apply(e,arguments)}))})),ne.define("no_active_items",(function(e){this.hook("instead","setActiveItem",(()=>{})),this.hook("instead","selectAll",(()=>{}))})),ne.define("optgroup_columns",(function(){var e=this,t=e.onKeyDown;e.hook("instead","onKeyDown",(function(n){var i,o,r,s;if(!e.isOpen||n.keyCode!==_&&n.keyCode!==C)return t.apply(e,arguments);s=Y(e.activeOption,"[data-group]"),i=Z(e.activeOption,"[data-selectable]"),(s=n.keyCode===_?s.previousSibling:s.nextSibling)&&(o=(r=s.querySelectorAll("[data-selectable]"))[Math.min(r.length-1,i)])&&e.setActiveOption(o)}))})),ne.define("remove_button",(function(e){e=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},e);var t=this;if(e.append){var n='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+F(e.title)+'">'+e.label+"</a>";t.hook("after","setupTemplates",(()=>{var e=t.settings.render.item;t.settings.render.item=function(){var i=B(e.apply(t,arguments)),o=B(n);return i.appendChild(o),N(o,"mousedown",(e=>{j(e,!0)})),N(o,"click",(e=>{if(j(e,!0),!t.isLocked){var n=i.dataset.value;t.removeItem(n),t.refreshOptions(!1)}})),i}}))}})),ne.define("restore_on_backspace",(function(e){var t=this;e.text=e.text||function(e){return e[t.settings.labelField]},t.on("item_remove",(function(n){if(""===t.control_input.value.trim()){var i=t.options[n];i&&t.setTextboxValue(e.text.call(t,i))}}))})),ne.define("virtual_scroll",(function(e){const t=this,n=t.canLoad,i=t.clearActiveOption,o=t.loadCallback;var r,s={},a=!1;if(!t.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";function l(e){if(!("number"==typeof t.settings.maxOptions&&r.children.length>=t.settings.maxOptions))return!(!(e in s)||!s[e])}t.settings.sortField=[{field:"$order"},{field:"$score"}],t.setNextUrl=function(e,t){s[e]=t},t.getUrl=function(e){if(e in s){const t=s[e];return s[e]=!1,t}return s={},t.settings.firstUrl(e)},t.hook("instead","clearActiveOption",(()=>{if(!a)return i.call(t)})),t.hook("instead","canLoad",(e=>e in s?l(e):n.call(this,e))),t.hook("instead","loadCallback",((e,n,i)=>{a||t.clearOptions(),o.call(t,e,n,i),a=!1})),t.hook("after","refreshOptions",(()=>{const e=t.lastValue;var n;l(e)?(n=t.render("loading_more",{query:e}))&&n.setAttribute("data-selectable",""):e in s&&!r.querySelector(".no-results")&&(n=t.render("no_more_results",{query:e})),n&&(z(n,t.settings.optionClass),r.append(n))})),t.hook("after","setup",(()=>{r=t.dropdown_content,t.settings.render=Object.assign({},{loading_more:function(e,t){return'<div class="loading-more-results">Loading more results ... </div>'},no_more_results:function(e,t){return'<div class="no-more-results">No more results</div>'}},t.settings.render),r.addEventListener("scroll",(function(){r.clientHeight/(r.scrollHeight-r.scrollTop)<.95||l(t.lastValue)&&(a||(a=!0,t.load.call(t,t.lastValue)))}))}))})),ne}()},254:function(t){"use strict";t.exports=e}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,i),r.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var o={};return function(){"use strict";i.r(o),i.d(o,{select:function(){return d}});i.p;var e=i(592),t=i.n(e);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={getSelectorFromElement:function(e){var t=e.getAttribute("data-target");t&&"#"!==t||(t=e.getAttribute("href")||"");try{return document.querySelectorAll(t).length>0?t:null}catch(e){return null}},isPlainObject:function(e){if("object"==n(e)&&null!==e){var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return!1},normalizeOptions:function(e,t){if(e=this.isPlainObject(e)?e:{},!this.isPlainObject(t))return console.error("defaults is not an object"),e;for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||delete e[n];return e}};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a={sv:{add:"Lägg till",remove_button:"Ta bort val",clear_button:"Ta bort alla val",no_results:"Inga alternativ matchar"},en:{add:"Add",remove_button:"Remove",clear_button:"Clear all",no_results:"No results found"}},l={staticConfig:{wrapperClass:"env-select",inputClass:"env-select__input",dropdownClass:"env-select__dropdown",dropdownContentClass:"env-select__dropdown__content",itemClass:"env-select__item",optionClass:"env-select__dropdown__option",sortField:{field:"text",direction:"asc"},plugins:{remove_button:{title:"".concat(a.sv.remove_button),className:"env-select__item__remove"},clear_button:{title:"".concat(a.sv.clear_button),className:"env-select__input__clear"}},render:{option_create:function(e,t){return'<div class="create">'.concat(this.settings.i18n.add," <strong>").concat(t(e.input),"</strong>&hellip;</div>")},no_results:function(){return'<div class="no-results">'.concat(this.settings.i18n.no_results,"</div>")},loading:function(){return'<div class="env-select__spinner env-spinner-bounce"><div class="env-bounce1"></div><div class="env-bounce2"></div><div class="env-bounce3"></div></div>'}}},userConfig:{valueField:"value",labelField:"text",searchField:["text"],maxItems:null,options:null,items:null,create:!1,clearButton:!0,placeholder:null,createFilter:function(e){return!((e=e.toLowerCase())in this.options)},preload:!1,load:null,onInitialize:null,onChange:null,onItemAdd:null,onItemRemove:null,onClear:null,onOptionAdd:null,onOptionRemove:null,onOptionClear:null,onDropdownOpen:null,onDropdownClose:null,onType:null,onFocus:null,onBlur:null,onLoad:null,i18n:"sv"}},c=function(e,n){this.el=e,this.settings=n,this.el.classList.remove("env-form-input");var i=new(t())(this.el,this.settings);return this.addOptions=i.addOption.bind(i),this.load=i.load.bind(i),this.getOption=i.getOption.bind(i),this.updateOption=i.updateOption.bind(i),this.removeOption=i.removeOption.bind(i),this.getItem=i.getItem.bind(i),this.addItem=i.addItem.bind(i),this.refreshOptions=i.refreshOptions.bind(i),this.getValue=i.getValue.bind(i),this.setValue=i.setValue.bind(i),this.destroy=function(){for(var e in i.destroy(),this)Object.prototype.hasOwnProperty.call(this,e)&&delete this[e];i=null},this},d=function(e,t){var n=function(e){var t=[];if("string"==typeof e){var n=document.querySelectorAll(e);if(n&&n.length>0)for(var i=0;i<n.length;i++)t.push(n[i])}else if("object"===s(e))if(1===e.nodeType)t.push(e);else if(e.length>0)for(var o=0;o<e.length;o++)t.push(e[o]);return t}(e);if(t=function(e){for(var t in e=r.normalizeOptions(e,l.userConfig),(e=Object.assign({},l.staticConfig,l.userConfig,e)).clearButton||delete e.plugins.clear_button,e.items||delete e.items,e.placeholder||delete e.placeholder,e.options||delete e.options,"string"==typeof e.i18n&&Object.prototype.hasOwnProperty.call(a,e.i18n)?e.i18n=Object.assign({},a[e.i18n]):r.isPlainObject(e.i18n)?e.i18n=Object.assign({},a.sv,e.i18n):e.i18n=Object.assign({},a.sv),e.plugins)e.plugins[t].title&&e.i18n[t]&&(e.plugins[t].title=e.i18n[t]);return e}(t),n.length>0)return n.filter((function(e){return!e.classList.contains("tomselected")})).map((function(e){return new c(e,t)}))},u=i(254),h=i.n(u),p={reflow:function(e){return e.offsetHeight},isTouch:function(){return window.matchMedia("(pointer: coarse)").matches},getToggleSpeed:function(e,t){var n,i=300;return(n=e?getComputedStyle(e).getPropertyValue(t):getComputedStyle(document.documentElement).getPropertyValue(t))&&parseFloat(n)>0&&(n.includes("ms")?i=parseInt(n,10):n.includes("s")&&(i=1e3*parseFloat(n))),i}};function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v="aria-expanded",g="envAccordion",m="env-accordion--show",y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.$el=h()(t),this.$el.hasClass(m)&&this.$el.removeClass(m).show(),this.speed=p.getToggleSpeed(this.$el[0],"--env-collapse-toggle-duration")}var t,n,i;return t=e,i=[{key:"_jQuery",value:function(t){return this.each((function(){var n=new e(this);if("string"!=typeof t)n.toggle();else{if(void 0===n[t])throw new Error('No method named "'.concat(t,'"'));n[t]()}}))}}],(n=[{key:"toggle",value:function(){"true"===this.$el.attr(v)?this.hide():this.show()}},{key:"show",value:function(){var e=this;h()(this.$el.attr("data-parent")).find("[".concat(v,'="true"]')).each(function(t,n){e._hide(h()(n),e.speed)}.bind(this)),this.$el.attr(v,!0).stop().slideDown(this.speed)}},{key:"hide",value:function(){this._hide(this.$el,this.speed)}},{key:"_hide",value:function(e,t){e.attr(v,!1).stop().slideUp(t,(function(){e.removeClass(m)}))}}])&&f(t.prototype,n),i&&f(t,i),e}();if("undefined"!=typeof document){var b=h().fn[g];h().fn[g]=y._jQuery,h().fn[g].Constructor=y,h().fn[g].noConflict=function(){return h().fn[g]=b,y._jQuery},h()(document).on("click","[data-env-accordion]",(function(e){e.preventDefault();var t=h()(this),n=t.attr("href")||t.attr("data-target");h()(n)[g]()}))}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _="aria-expanded",k="env-collapse--expanded",C="env-collapse--show",O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.$el=h()(t),this.$trigger=h()('[data-env-collapse][href="#'.concat(t.id,'"], [data-env-collapse][data-target="#').concat(t.id,'"]')),this.speed=p.getToggleSpeed(this.$trigger[0],"--env-collapse-toggle-duration")}var t,n,i;return t=e,i=[{key:"_jQuery",value:function(t){return this.each((function(){var n=new e(this);if("string"!=typeof t)n.toggle();else{if(void 0===n[t])throw new Error('No method named "'.concat(t,'"'));n[t]()}}))}}],(n=[{key:"toggle",value:function(){this.$el.is(":animated")||(this.$el.hasClass(C)?this.hide():this.show())}},{key:"show",value:function(){this.$trigger.length&&this.$trigger.addClass(k).attr(_,!0),this.$el.stop().slideDown(this.speed).addClass(C)}},{key:"hide",value:function(){this.$trigger.length&&this.$trigger.removeClass(k).attr(_,!1),this.$el.stop().slideUp(this.speed).removeClass(C)}}])&&w(t.prototype,n),i&&w(t,i),e}();if("undefined"!=typeof document){var x=h().fn.envCollapse;h().fn.envCollapse=O._jQuery,h().fn.envCollapse.Constructor=O,h().fn.envCollapse.noConflict=function(){return h().fn.envCollapse=x,O._jQuery},h()(document).on("click","[data-env-collapse]",(function(e){e.preventDefault();var t=h()(this),n=t.attr("href")||t.attr("data-target"),i=h()(n);i.is(":animated")||i.envCollapse()}))}function E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var I="env-is-open",S="[data-dropdown]",A=".env-dropdown",$="click.env-dropdown",T="keydown.env-dropdown",F=".env-dropdown__menu",P="Escape",L="ArrowDown",D="ArrowUp",j=32,N="Tab",M=new RegExp("".concat(D,"|").concat(L,"|").concat(P)),V=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.$el=h()(t),this._id=this.el.id}var t,n,i;return t=e,i=[{key:"_jQuery",value:function(t){return this.each((function(){var n=h()(this),i=n.data("env.dropdown");if(i||(i=new e(this),n.data("env.dropdown",i)),"string"!=typeof t)i.toggle();else{var o=i[t];if(void 0===o)throw new Error('No method named "'.concat(t,'"'));o.call(i)}}))}}],(n=[{key:"toggle",value:function(){this.$el.hasClass(I)?this.hide():this.show()}},{key:"show",value:function(){this.$el.addClass(I),this.$el.find(S).attr("aria-expanded","true"),this._bindEvents()}},{key:"hide",value:function(){this.$el.removeClass(I),this.$el.find(S).attr("aria-expanded","false"),this._unbindEvents()}},{key:"_bindEvents",value:function(){var e=this,t="".concat($,"-").concat(this.el.id),n="".concat(T,"-").concat(this.el.id);h()(document).off(t).on(t,(function(t){h()(t.target).hasClass(F)||e.hide()})),this.$el.off(n).one(n,(function(t){t.key===P&&e.hide()}))}},{key:"_unbindEvents",value:function(){h()(document).off("".concat($,"-").concat(this.el.id)),this.$el.off("".concat(T,"-").concat(this.el.id))}}])&&E(t.prototype,n),i&&E(t,i),e}();function H(e){if(!e||2!==e.button&&("keyup"!==e.type||e.key===N))for(var t=h()(S),n=0,i=t.length;n<i;n++){var o=h()(t[n]).closest(A).data("env.dropdown");if(o){var r=o.$el.find(F)[0];if(e){if(e.originalEvent.path.includes(document.documentElement.getElementsByClassName("env-dropdown env-is-open")[0]))continue;if("keyup"===e.type&&e.key===N&&r.contains(e.originalEvent.target))continue}o.hide()}}}function q(e){var t=this;if(M.test(e.key)){var n=h()(this).closest(A).hasClass(I);if(n||e.key!==P){e.preventDefault(),e.stopPropagation();var i=function(){return t.matches(S)?t:h()(t).closest(A).find(S)[0]};if(e.key===P)return H(),void i().focus();if(n||e.key!==D&&e.key!==L)if(n&&e.which!==j)!function(e,t){if(t.length){var n=t.index(e.target);e.key===D&&n>0&&n--,e.key===L&&n<t.length-1&&n++,t[n=-1===n?0:n].focus()}}(e,h()(this).closest(A).find(".env-dropdown__item"));else H();else i().click()}}}if("undefined"!=typeof document){var B=h().fn.envDropdown;h().fn.envDropdown=V._jQuery,h().fn.envDropdown.Constructor=V,h().fn.envDropdown.noConflict=function(){return h().fn.envDropdown=B,V._jQuery},h()(document).on("click",S,(function(e){e.preventDefault();var t=h()(this);h()(t.data("target")).envDropdown()})),h()(document).on(T,S,q),h()(document).on(T,F,q),h()(document).on("keyup.env-dropdown",H)}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U="env.image-slider",z=".".concat(U),K=".data-api",W={buttons:!0,imageSlider:!1,interval:5e3,keyboard:!0,pause:"hover",slide:!1,swipe:!0,wrap:!0},G=".env-image-slider__item--active",Y=".env-is-active",X=".env-image-slider__item--active.env-image-slider__item",J="[data-move], [data-move-to], [data-image-slider-touch]",Z="[data-image-slider]",ee=".env-image-slider__indicators",te=".env-image-slider__inner",ne=".env-image-slider__item",ie=".env-image-slider__thumbnails",oe="env-image-slider__item--active",re="env-is-active",se="env-image-slider",ae="env-image-slider__item--left",le="env-image-slider__item--next",ce="env-image-slider__item--prev",de="env-image-slider__item--right",ue="env-image-slider--slide",he="left",pe="next",fe="prev",ve="right",ge={CLICK_DATA_API:"click".concat(z).concat(K),KEYDOWN:"keydown".concat(z),LOAD_DATA_API:"load".concat(z).concat(K),MOUSEENTER:"mouseenter".concat(z),MOUSELEAVE:"mouseleave".concat(z),SLID:"slid".concat(z),SLIDE:"slide".concat(z),TOUCHEND:"touchend".concat(z),TOUCHMOVE:"touchmove".concat(z),TOUCHSTART:"touchstart".concat(z)},me=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=h()(t),this.$images=this.$el.find(ne),this._isSliding=!1,this._isPaused=!1,this._interval=null,this._activeElement=null,this._indicatorsElement=this.$el.find(ee)[0],this._thumbnailElements=this.$el.find(ie)[0],this.config=h().extend({},W,this.$el.data(),n),this.$images.length>1&&n.buttons&&this._addSlideButtons(),this._bindEvents()}var t,n,i;return t=e,i=[{key:"_jQueryInterface",value:function(t){var n=this;return this.each((function(){var i=h()(n),o=i.data(U),r=h().extend({},W,i.data());"object"===R(t)&&h().extend(r,t);var s="string"==typeof t?t:r.move;if(o||(o=new e(n,r),i.data(U,o)),"number"==typeof t)o.goTo(t);else if("string"==typeof s){if(void 0===o[s])throw new Error('No method named "'.concat(s,'"'));o[s]()}else r.interval&&"cycle"===r.imageSlider&&(o.pause(),o.cycle())}))}},{key:"_dataApiClickHandler",value:function(t){var n=r.getSelectorFromElement(this);if(n){var i=h()(n).eq(0);if(i.length&&i.hasClass(se)){var o=h().extend({},i.data(),h()(this).data()),s=this.getAttribute("data-move-to");s&&(o.interval=!1),e._jQueryInterface.call(i,o),s&&i.data(U).goTo(s),t.preventDefault()}}}}],(n=[{key:"next",value:function(){this._isSliding||this._slide(pe)}},{key:"prev",value:function(){this._isSliding||this._slide(fe)}},{key:"nextWhenVisible",value:function(){document.hidden||this.next()}},{key:"pause",value:function(e){e||(this._isPaused=!0),clearInterval(this._interval),this._interval=null}},{key:"cycle",value:function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this.config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this.config.interval))}},{key:"goTo",value:function(e){this._activeElement=this.$el.find(X)[0];var t=this._getItemIndex(this._activeElement);if(!(e>this.$images.length-1||e<0||this._isSliding)){if(t===e)return this.pause(),void this.cycle();var n=e>t?pe:fe;this._slide(n,this.$images[e])}}},{key:"startTouchSlide",value:function(e){this.touchstartx=e.originalEvent.touches[0].pageX}},{key:"moveTouchSlide",value:function(e){this.touchmovex=e.originalEvent.touches[0].pageX,this.movex=-(this.touchstartx-this.touchmovex),this.moved=!1;var t=this.$el.find(G).children();t.css("transform","translate3d(".concat(this.movex,"px, 0, 0)")),this.movex>80?(this.prev(),this.moved=!0,setTimeout((function(){t.css("transform","translate3d(0, 0, 0)")}),500)):this.movex<-80&&(this.next(),this.moved=!0,setTimeout((function(){t.css("transform","translate3d(0, 0, 0)")}),500))}},{key:"endTouchSlide",value:function(){this.moved||this.$el.find(G).children().css("transform","translate3d(0, 0, 0)")}},{key:"dispose",value:function(){this.$el.off(z).removeData(U),this.$el=null,this.$images=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null,this._thumbnailElements=null}},{key:"_addSlideButtons",value:function(){var e=this.$el[0].id,t="<button type='button' class='env-image-slider--prev' data-move='prev' data-target='#".concat(e,"'>\n               <svg class='env-image-slider__previous-icon env-icon env-icon-small'>\n               <use xlink:href='/sitevision/envision-icons.svg#icon-arrow-left'></use>\n               </svg>\n               <span class='env-assistive-text'>Previous</span>\n            </button>\n            <button type='button' class='env-image-slider--next' data-move='next' data-target='#").concat(e,"'>\n               <svg class='env-image-slider__next-icon env-icon env-icon-small'>\n               <use xlink:href='/sitevision/envision-icons.svg#icon-arrow-right'></use>\n               </svg>\n               <span class='env-assistive-text'>Next</span>\n            </button>");h()("#".concat(e)).find(te).append(t)}},{key:"_getItemByDirection",value:function(e,t){var n=e===pe,i=this._getItemIndex(t),o=this.$images.length-1;if((!n&&0===i||n&&i===o)&&!this.config.wrap)return t;var r=(i+(n?1:-1))%this.$images.length;return-1===r?this.$images[o]:this.$images[r]}},{key:"_bindEvents",value:function(){var e=this;this.config.keyboard&&this.$el.on(ge.KEYDOWN,(function(t){return e._keydown(t)})),"hover"===this.config.pause&&"cycle"===this.config.imageSlider&&(this.$el.on(ge.MOUSEENTER,(function(t){return e.pause(t)})).on(ge.MOUSELEAVE,(function(t){return e.cycle(t)})),p.isTouch()&&this.$el.on(ge.TOUCHEND,(function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout((function(t){return e.cycle(t)}),500,e.config.interval)}))),this.config.swipe&&this._bindTouchSlider()}},{key:"_bindTouchSlider",value:function(){var e=this,t=this.$el.find(te);t.on(ge.TOUCHSTART,(function(t){e.startTouchSlide(t)})),t.on(ge.TOUCHMOVE,(function(t){e.moveTouchSlide(t)})),t.on(ge.TOUCHEND,(function(){e.endTouchSlide(event)}))}},{key:"_keydown",value:function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next();break;default:return}}},{key:"_getItemIndex",value:function(e){return this.$images.index(e)}},{key:"_triggerSlideEvent",value:function(e,t){var n=this._getItemIndex(e),i=this._getItemIndex(this.$el.find(X)[0]),o=h().Event(ge.SLIDE,{targetElement:e,direction:t,from:i,to:n});return this.$el.trigger(o),o}},{key:"_setActiveIndicatorElement",value:function(e){if(this._indicatorsElement){h()(this._indicatorsElement).find(Y).removeClass(re);var t=this._indicatorsElement.children[this._getItemIndex(e)];t&&h()(t).addClass(re)}else if(this._thumbnailElements){h()(this._thumbnailElements).find(G).removeClass(oe);var n=this._thumbnailElements.children[this._getItemIndex(e)].firstElementChild;n&&h()(n).addClass(oe)}}},{key:"_slide",value:function(e,t){var n,i,o,r=this,s=this.$el.find(X)[0],a=this._getItemIndex(s),l=t||s&&this._getItemByDirection(e,s),c=this._getItemIndex(l);e===pe?(n=ae,i=le,o=he):(n=de,i=ce,o=ve);var d=h()(l);if(l&&d.hasClass(oe))this._isSliding=!1;else{var u=this._triggerSlideEvent(l,o);if(!u.isDefaultPrevented()&&s&&l){this._isSliding=!0,this._setActiveIndicatorElement(l);var f=h().Event(ge.SLID,{relatedTarget:l,direction:o,from:a,to:c}),v=h()(s);this.$el.hasClass(ue)?(d.addClass(i),p.reflow(l),v.addClass(n),d.addClass(n),v.one("transitionend",(function(){d.removeClass("".concat(n," ").concat(i)).addClass(oe),v.removeClass("".concat(oe," ").concat(i," ").concat(n)),r._isSliding=!1,r.$el.trigger(f)}))):(v.removeClass(oe),d.addClass(oe),this._isSliding=!1,this.$el.trigger(u))}}}}])&&Q(t.prototype,n),i&&Q(t,i),e}();if("undefined"!=typeof document){h()(document).on(ge.CLICK_DATA_API,J,me._dataApiClickHandler),h()(window).on(ge.LOAD_DATA_API,(function(){h()(Z).each((function(e,t){var n=h()(t);me._jQueryInterface.call(n,n.data())}))}));var ye=h().fn.envImageslider;h().fn.envImageslider=me._jQueryInterface,h().fn.envImageslider.Constructor=me,h().fn.envImageslider.noConflict=function(){return h().fn.envImageslider=ye,me._jQueryInterface}}function be(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var we="env-animation-in-progress",_e="env-image-viewer__backdrop--in",ke=".".concat("env.image-viewer"),Ce=".env-is-active",Oe="[data-move-to]",xe="[data-move]",Ee="[data-image-viewer]",Ie=".env-image-viewer__images",Se=".env-image-viewer__indicators",Ae=".env-spinner",$e="env-is-active",Te="env-image-viewer--hidden",Fe="env-spinner--hide",Pe={CLICK_DATA_API:"click".concat(ke).concat(".data-api"),TOUCHEND:"touchend".concat(ke),TOUCHMOVE:"touchmove".concat(ke),TOUCHSTART:"touchstart".concat(ke)},Le=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=h()(t),this.$images=this.$el.find(Ie),this._isShown=!1,this.config=h().extend({},this.$el.data()),this.config.index=this.$images.index(n[0])}var t,n,i;return t=e,i=[{key:"_jQuery",value:function(t){var n=this;return this.each((function(){var i=new e(n,t);i.show(i.config.index)}))}}],(n=[{key:"next",value:function(){this.show(this._getNextItemIndex())}},{key:"prev",value:function(){this.show(this._getPrevItemIndex())}},{key:"show",value:function(e){this.config.index=Number(e);var t=h()(this.$images[e])[0].getAttribute("href");if(this._isShown){h()(Ae).removeClass(Fe),this.$btnContainer.addClass(Te);var n=this._loadImage(t);this.$imgContainer.html(n),this._setActiveIndicatorElement()}else{this.$modal=h()("<div/>",{class:"env-image-viewer__modal"}),this.$btnContainer=h()("<div/>",{class:"env-image-viewer__dialog"}),this.$imgContainer=h()("<div/>",{class:"env-image-viewer__modal-container"}),this.$modal.append(this.$btnContainer),this.$btnContainer.append(this.$imgContainer),this.$modal.appendTo(document.body),this.$images.length>1&&(this.$btnContainer.append(this._getButtons()),this.$btnContainer.append(this._getIndicators())),this.$btnContainer.addClass(Te);var i=this._loadImage(t);this.$imgContainer.html(i),this._isShown=!0,h()("body").css("overflow","hidden"),this._bindContainerEvents(),this._bindEvents(),this._showBackdrop(),h()('<div class="env-spinner">\n                                <div class="env-rect1"></div>\n                                <div class="env-rect2"></div>\n                                <div class="env-rect3"></div>\n                                <div class="env-rect4"></div>\n                                <div class="env-rect5"></div>\n                             </div>').prependTo(this.$modal)}}},{key:"hide",value:function(){var e=this;this.$backdrop.one("transitionend",(function(){e.$backdrop.remove(),e.$modal.remove(),e.$btnContainer.remove(),e.$imgContainer.remove(),h()("body").css("overflow","scroll")})).removeClass(_e),this._isShown=!1}},{key:"_loadImage",value:function(e){var t=this,n=h()("<img>"),i=h()(".env-image-viewer__dialog");return n.addClass("env-image-viewer__img").attr({tabindex:"-1",src:e}).on("load",(function(){var e=n.height(),o=n.width(),r=window.innerHeight;o>800&&i.css({"max-width":"80%"}),r<e&&n.css({"max-height":.8*r}),h()(Ae).addClass(Fe),t.$btnContainer.removeClass(Te),t.$imgContainer.children().eq(0).trigger("focus")})),n}},{key:"_bindContainerEvents",value:function(){var e=this;this.$btnContainer.on(Pe.CLICK_DATA_API,xe,(function(t){t.preventDefault(),"next"===h()(t.currentTarget).data("move")?e.next():e.prev()})),this.$btnContainer.on(Pe.CLICK_DATA_API,Oe,(function(t){var n=t.currentTarget.getAttribute("data-move-to");n&&e.show(n)}))}},{key:"_getButtons",value:function(){return'<button type="button" class="env-image-viewer--prev" data-move="prev">\n               <svg class="env-image-viewer__prev-icon env-icon env-icon-small">\n               <use xlink:href="/sitevision/envision-icons.svg#icon-arrow-left"></use>\n               </svg>\n               <span class="env-assistive-text">Previous</span>\n            </button>\n            <button type="button" class="env-image-viewer--next" data-move="next">\n               <svg class="env-image-viewer__next-icon env-icon env-icon-small">\n               <use xlink:href="/sitevision/envision-icons.svg#icon-arrow-right"></use>\n               </svg>\n               <span class="env-assistive-text">Next</span>\n            </button>'}},{key:"_getIndicators",value:function(){var e=this._getIndicatorItems();return'<div class="env-image-viewer__indicators">\n                  '.concat(e,"\n               </div>")}},{key:"_getIndicatorItems",value:function(){var e=this.config.index,t="";return this.$images.each((function(n){var i=n===e;t+='<button type="button" title="Move to image '.concat(n+1,'" data-move-to="').concat(n,'" class="').concat(i?"env-is-active":"",'"></button>')})),t}},{key:"_showBackdrop",value:function(){var e=this;this.$backdrop=h()("<div/>",{class:"env-image-viewer__backdrop"}),this.$modal.on(Pe.CLICK_DATA_API,(function(t){e.$backdrop.hasClass(we)||t.target===t.currentTarget&&e._isShown&&e.hide()})),this.$backdrop.appendTo(document.body),this.$backdrop.one("animationend",this._removeBackdropAnimation).addClass("".concat(_e," ").concat(we))}},{key:"_removeBackdropAnimation",value:function(e){h()(e.currentTarget).removeClass(we)}},{key:"_bindEvents",value:function(){var e=this,t=this.$modal.find("button"),n=t[0],i=t[t.length-1];this.$modal.on("keydown",(function(t){return e._keydown(t,n,i)}))}},{key:"_keydown",value:function(e,t,n){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case 37:e.preventDefault(),this.prev();break;case 39:e.preventDefault(),this.next();break;case 27:e.preventDefault(),this.$backdrop.hasClass(we)||this.hide();break;case 9:"IMG"===e.target.tagName?(e.preventDefault(),t.focus()):e.shiftKey?e.target===t&&(e.preventDefault(),n.focus()):e.target===n&&(e.preventDefault(),t.focus());break;default:return}}},{key:"_getNextItemIndex",value:function(){return this.config.index===this.$images.length-1?0:this.config.index+1}},{key:"_getPrevItemIndex",value:function(){return 0===this.config.index?this.$images.length-1:this.config.index-1}},{key:"_setActiveIndicatorElement",value:function(){if(this._indicatorsElement=this.$btnContainer.find(Se)[0],this.$images.length>0){this.$btnContainer.find(Ce).removeClass($e);var e=this.$btnContainer.find(Se).children()[this.config.index];e&&h()(e).addClass($e)}}}])&&be(t.prototype,n),i&&be(t,i),e}();if("undefined"!=typeof document){h()(document).on(Pe.CLICK_DATA_API,Ee,(function(e){e.preventDefault();var t=h()(e.target);t.is("img")?h()(this).envImageviewer(t.parent()):t.is("a.env-image-viewer__images")&&h()(this).envImageviewer(t)}));var De=h().fn.envImageviewer;h().fn.envImageviewer=Le._jQuery,h().fn.envImageviewer.Constructor=Le,h().fn.envImageviewer.noConflict=function(){return h().fn.envImageviewer=De,Le._jQuery}}function je(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ne="env-animation-in-progress",Me="env-modal-dialog__backdrop--in",Ve="env.modal-dialog",He="[data-modal-dialog-dismiss]",qe="focusin.env-modal-dialog",Be="[data-modal-dialog]",Re="[data-modal-alert]",Qe="show",Ue="hide.env-modal-dialog",ze="hidden.env-modal-dialog",Ke="show.env-modal-dialog",We="shown.env-modal-dialog",Ge=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.$el=h()(t),this._isShown=!1}var t,n,i;return t=e,i=[{key:"_jQuery",value:function(t){var n=this;return this.each((function(){var i=h()(n),o=i.data(Ve);if(o||(o=new e(n),i.data(Ve,o)),"string"!=typeof t)o.show();else{var r=o[t];if(void 0===r)throw new Error('No method named "'.concat(t,'"'));r.call(o)}}))}}],(n=[{key:"toggle",value:function(){return this._isShown?this.hide():this.show()}},{key:"show",value:function(){var e=this;if(!this._isShown){p.reflow(this.el);var t=h().Event(Ke,{});this.$el.trigger(t);var n=h().Event(We,{});this.$el.one("transitionend",(function(){e.$el.trigger(n)})).addClass(this._getModifierBase()+Qe).removeAttr("aria-hidden").css("opacity",1),this._showBackdrop(),this._isShown=!0,this.$el.trigger("focus"),h()("body").css("overflow","hidden"),this._bindEvents()}}},{key:"hide",value:function(){var e=this;if(this._isShown){var t=h().Event(Ue,{});this.$el.trigger(t),this.$el.one("transitionend",(function(){e.$el.removeClass(e._getModifierBase()+Qe);var t=h().Event(ze,{});e.$el.trigger(t)})).attr("aria-hidden","true").css("opacity",0).off("click",He),this.$backdrop.one("transitionend",(function(){e.$backdrop.remove(),h()("body").css("overflow","")})).removeClass(Me),this._isShown=!1,this._unbindEvents()}}},{key:"_bindEvents",value:function(){var e=this;this.$el.on("click",He,(function(t){return e.hide(t)})),h()(document).off(qe).one(qe,(function(t){document===t.target||e.el===t.target||e.$el.has(t.target).length||e.$el.trigger("focus")}));var t=this.$el.find('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]'),n=t[0],i=t[t.length-1];this.$el.on("keydown",(function(t){9===t.which&&(t.shiftKey?t.target===n&&(t.preventDefault(),i.focus()):t.target===i&&(t.preventDefault(),n.focus())),27===t.which&&e.hide()}))}},{key:"_getModifierBase",value:function(){return this.$el.hasClass("env-modal-alert")?"env-modal-alert--":"env-modal-dialog--"}},{key:"_unbindEvents",value:function(){this.$el.off("click keydown"),h()(document).off(qe)}},{key:"_showBackdrop",value:function(){var e=this;this.$backdrop=h()("<div/>",{class:"env-modal-dialog__backdrop"}),this.$el.on("mousedown",(function(t){e.$backdrop.hasClass(Ne)||t.target===t.currentTarget&&e._isShown&&e.hide()})),this.$backdrop.appendTo(document.body),this.$backdrop.one("animationend",this._removeBackdropAnimation).addClass("".concat(Me," ").concat(Ne))}},{key:"_removeBackdropAnimation",value:function(e){h()(e.currentTarget).removeClass(Ne)}}])&&je(t.prototype,n),i&&je(t,i),e}();if("undefined"!=typeof document){var Ye=h().fn.envDialog;h().fn.envDialog=Ge._jQuery,h().fn.envDialog.Constructor=Ge,h().fn.envDialog.noConflict=function(){return h().fn.envDialog=Ye,Ge._jQuery},h()(document).on("click",Re+","+Be,(function(e){e.preventDefault(),h()(h()(this).data("target")).envDialog()}))}var Xe="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,Je=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(Xe&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var Ze=Xe&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),Je))}};function et(e){return e&&"[object Function]"==={}.toString.call(e)}function tt(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function nt(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function it(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=tt(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/(auto|scroll|overlay)/.test(n+o+i)?e:it(nt(e))}function ot(e){return e&&e.referenceNode?e.referenceNode:e}var rt=Xe&&!(!window.MSInputMethodContext||!document.documentMode),st=Xe&&/MSIE 10/.test(navigator.userAgent);function at(e){return 11===e?rt:10===e?st:rt||st}function lt(e){if(!e)return document.documentElement;for(var t=at(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===tt(n,"position")?lt(n):n:e?e.ownerDocument.documentElement:document.documentElement}function ct(e){return null!==e.parentNode?ct(e.parentNode):e}function dt(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,o=n?t:e,r=document.createRange();r.setStart(i,0),r.setEnd(o,0);var s,a,l=r.commonAncestorContainer;if(e!==l&&t!==l||i.contains(o))return"BODY"===(a=(s=l).nodeName)||"HTML"!==a&&lt(s.firstElementChild)!==s?lt(l):l;var c=ct(e);return c.host?dt(c.host,t):dt(e,ct(t).host)}function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"===i||"HTML"===i){var o=e.ownerDocument.documentElement,r=e.ownerDocument.scrollingElement||o;return r[n]}return e[n]}function ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=ut(t,"top"),o=ut(t,"left"),r=n?-1:1;return e.top+=i*r,e.bottom+=i*r,e.left+=o*r,e.right+=o*r,e}function pt(e,t){var n="x"===t?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+i+"Width"])}function ft(e,t,n,i){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],at(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function vt(e){var t=e.body,n=e.documentElement,i=at(10)&&getComputedStyle(n);return{height:ft("Height",t,n,i),width:ft("Width",t,n,i)}}var gt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),yt=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function wt(e){return bt({},e,{right:e.left+e.width,bottom:e.top+e.height})}function _t(e){var t={};try{if(at(10)){t=e.getBoundingClientRect();var n=ut(e,"top"),i=ut(e,"left");t.top+=n,t.left+=i,t.bottom+=n,t.right+=i}else t=e.getBoundingClientRect()}catch(e){}var o={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},r="HTML"===e.nodeName?vt(e.ownerDocument):{},s=r.width||e.clientWidth||o.width,a=r.height||e.clientHeight||o.height,l=e.offsetWidth-s,c=e.offsetHeight-a;if(l||c){var d=tt(e);l-=pt(d,"x"),c-=pt(d,"y"),o.width-=l,o.height-=c}return wt(o)}function kt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=at(10),o="HTML"===t.nodeName,r=_t(e),s=_t(t),a=it(e),l=tt(t),c=parseFloat(l.borderTopWidth),d=parseFloat(l.borderLeftWidth);n&&o&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var u=wt({top:r.top-s.top-c,left:r.left-s.left-d,width:r.width,height:r.height});if(u.marginTop=0,u.marginLeft=0,!i&&o){var h=parseFloat(l.marginTop),p=parseFloat(l.marginLeft);u.top-=c-h,u.bottom-=c-h,u.left-=d-p,u.right-=d-p,u.marginTop=h,u.marginLeft=p}return(i&&!n?t.contains(a):t===a&&"BODY"!==a.nodeName)&&(u=ht(u,t)),u}function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,i=kt(e,n),o=Math.max(n.clientWidth,window.innerWidth||0),r=Math.max(n.clientHeight,window.innerHeight||0),s=t?0:ut(n),a=t?0:ut(n,"left"),l={top:s-i.top+i.marginTop,left:a-i.left+i.marginLeft,width:o,height:r};return wt(l)}function Ot(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===tt(e,"position"))return!0;var n=nt(e);return!!n&&Ot(n)}function xt(e){if(!e||!e.parentElement||at())return document.documentElement;for(var t=e.parentElement;t&&"none"===tt(t,"transform");)t=t.parentElement;return t||document.documentElement}function Et(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r={top:0,left:0},s=o?xt(e):dt(e,ot(t));if("viewport"===i)r=Ct(s,o);else{var a=void 0;"scrollParent"===i?"BODY"===(a=it(nt(t))).nodeName&&(a=e.ownerDocument.documentElement):a="window"===i?e.ownerDocument.documentElement:i;var l=kt(a,s,o);if("HTML"!==a.nodeName||Ot(s))r=l;else{var c=vt(e.ownerDocument),d=c.height,u=c.width;r.top+=l.top-l.marginTop,r.bottom=d+l.top,r.left+=l.left-l.marginLeft,r.right=u+l.left}}var h="number"==typeof(n=n||0);return r.left+=h?n:n.left||0,r.top+=h?n:n.top||0,r.right-=h?n:n.right||0,r.bottom-=h?n:n.bottom||0,r}function It(e){return e.width*e.height}function St(e,t,n,i,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var s=Et(n,i,r,o),a={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}},l=Object.keys(a).map((function(e){return bt({key:e},a[e],{area:It(a[e])})})).sort((function(e,t){return t.area-e.area})),c=l.filter((function(e){var t=e.width,i=e.height;return t>=n.clientWidth&&i>=n.clientHeight})),d=c.length>0?c[0].key:l[0].key,u=e.split("-")[1];return d+(u?"-"+u:"")}function At(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=i?xt(t):dt(t,ot(n));return kt(n,o,i)}function $t(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),i=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+i,height:e.offsetHeight+n}}function Tt(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function Ft(e,t,n){n=n.split("-")[0];var i=$t(e),o={width:i.width,height:i.height},r=-1!==["right","left"].indexOf(n),s=r?"top":"left",a=r?"left":"top",l=r?"height":"width",c=r?"width":"height";return o[s]=t[s]+t[l]/2-i[l]/2,o[a]=n===a?t[a]-i[c]:t[Tt(a)],o}function Pt(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function Lt(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var i=Pt(e,(function(e){return e[t]===n}));return e.indexOf(i)}(e,"name",n))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&et(n)&&(t.offsets.popper=wt(t.offsets.popper),t.offsets.reference=wt(t.offsets.reference),t=n(t,e))})),t}function Dt(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=At(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=St(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=Ft(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=Lt(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function jt(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function Nt(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var o=t[i],r=o?""+o+n:e;if(void 0!==document.body.style[r])return r}return null}function Mt(){return this.state.isDestroyed=!0,jt(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Nt("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Vt(e){var t=e.ownerDocument;return t?t.defaultView:window}function Ht(e,t,n,i){var o="BODY"===e.nodeName,r=o?e.ownerDocument.defaultView:e;r.addEventListener(t,n,{passive:!0}),o||Ht(it(r.parentNode),t,n,i),i.push(r)}function qt(e,t,n,i){n.updateBound=i,Vt(e).addEventListener("resize",n.updateBound,{passive:!0});var o=it(e);return Ht(o,"scroll",n.updateBound,n.scrollParents),n.scrollElement=o,n.eventsEnabled=!0,n}function Bt(){this.state.eventsEnabled||(this.state=qt(this.reference,this.options,this.state,this.scheduleUpdate))}function Rt(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,Vt(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function Qt(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function Ut(e,t){Object.keys(t).forEach((function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Qt(t[n])&&(i="px"),e.style[n]=t[n]+i}))}var zt=Xe&&/Firefox/i.test(navigator.userAgent);function Kt(e,t,n){var i=Pt(e,(function(e){return e.name===t})),o=!!i&&e.some((function(e){return e.name===n&&e.enabled&&e.order<i.order}));if(!o){var r="`"+t+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return o}var Wt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Gt=Wt.slice(3);function Yt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Gt.indexOf(e),i=Gt.slice(n+1).concat(Gt.slice(0,n));return t?i.reverse():i}var Xt="flip",Jt="clockwise",Zt="counterclockwise";function en(e,t,n,i){var o=[0,0],r=-1!==["right","left"].indexOf(i),s=e.split(/(\+|\-)/).map((function(e){return e.trim()})),a=s.indexOf(Pt(s,(function(e){return-1!==e.search(/,|\s/)})));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==a?[s.slice(0,a).concat([s[a].split(l)[0]]),[s[a].split(l)[1]].concat(s.slice(a+1))]:[s];return(c=c.map((function(e,i){var o=(1===i?!r:r)?"height":"width",s=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,s=!0,e):s?(e[e.length-1]+=t,s=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,n,i){var o=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+o[1],s=o[2];if(!r)return e;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=i}return wt(a)[t]/100*r}if("vh"===s||"vw"===s)return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r;return r}(e,o,t,n)}))}))).forEach((function(e,t){e.forEach((function(n,i){Qt(n)&&(o[t]+=n*("-"===e[i-1]?-1:1))}))})),o}var tn={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var o=e.offsets,r=o.reference,s=o.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",c=a?"width":"height",d={start:yt({},l,r[l]),end:yt({},l,r[l]+r[c]-s[c])};e.offsets.popper=bt({},s,d[i])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,i=e.placement,o=e.offsets,r=o.popper,s=o.reference,a=i.split("-")[0],l=void 0;return l=Qt(+n)?[+n,0]:en(n,r,s,a),"left"===a?(r.top+=l[0],r.left-=l[1]):"right"===a?(r.top+=l[0],r.left+=l[1]):"top"===a?(r.left+=l[0],r.top-=l[1]):"bottom"===a&&(r.left+=l[0],r.top+=l[1]),e.popper=r,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||lt(e.instance.popper);e.instance.reference===n&&(n=lt(n));var i=Nt("transform"),o=e.instance.popper.style,r=o.top,s=o.left,a=o[i];o.top="",o.left="",o[i]="";var l=Et(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);o.top=r,o.left=s,o[i]=a,t.boundaries=l;var c=t.priority,d=e.offsets.popper,u={primary:function(e){var n=d[e];return d[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(d[e],l[e])),yt({},e,n)},secondary:function(e){var n="right"===e?"left":"top",i=d[n];return d[e]>l[e]&&!t.escapeWithReference&&(i=Math.min(d[n],l[e]-("right"===e?d.width:d.height))),yt({},n,i)}};return c.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";d=bt({},d,u[t](e))})),e.offsets.popper=d,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,i=t.reference,o=e.placement.split("-")[0],r=Math.floor,s=-1!==["top","bottom"].indexOf(o),a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return n[a]<r(i[l])&&(e.offsets.popper[l]=r(i[l])-n[c]),n[l]>r(i[a])&&(e.offsets.popper[l]=r(i[a])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!Kt(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var o=e.placement.split("-")[0],r=e.offsets,s=r.popper,a=r.reference,l=-1!==["left","right"].indexOf(o),c=l?"height":"width",d=l?"Top":"Left",u=d.toLowerCase(),h=l?"left":"top",p=l?"bottom":"right",f=$t(i)[c];a[p]-f<s[u]&&(e.offsets.popper[u]-=s[u]-(a[p]-f)),a[u]+f>s[p]&&(e.offsets.popper[u]+=a[u]+f-s[p]),e.offsets.popper=wt(e.offsets.popper);var v=a[u]+a[c]/2-f/2,g=tt(e.instance.popper),m=parseFloat(g["margin"+d]),y=parseFloat(g["border"+d+"Width"]),b=v-e.offsets.popper[u]-m-y;return b=Math.max(Math.min(s[c]-f,b),0),e.arrowElement=i,e.offsets.arrow=(yt(n={},u,Math.round(b)),yt(n,h,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(jt(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=Et(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),i=e.placement.split("-")[0],o=Tt(i),r=e.placement.split("-")[1]||"",s=[];switch(t.behavior){case Xt:s=[i,o];break;case Jt:s=Yt(i);break;case Zt:s=Yt(i,!0);break;default:s=t.behavior}return s.forEach((function(a,l){if(i!==a||s.length===l+1)return e;i=e.placement.split("-")[0],o=Tt(i);var c=e.offsets.popper,d=e.offsets.reference,u=Math.floor,h="left"===i&&u(c.right)>u(d.left)||"right"===i&&u(c.left)<u(d.right)||"top"===i&&u(c.bottom)>u(d.top)||"bottom"===i&&u(c.top)<u(d.bottom),p=u(c.left)<u(n.left),f=u(c.right)>u(n.right),v=u(c.top)<u(n.top),g=u(c.bottom)>u(n.bottom),m="left"===i&&p||"right"===i&&f||"top"===i&&v||"bottom"===i&&g,y=-1!==["top","bottom"].indexOf(i),b=!!t.flipVariations&&(y&&"start"===r&&p||y&&"end"===r&&f||!y&&"start"===r&&v||!y&&"end"===r&&g),w=!!t.flipVariationsByContent&&(y&&"start"===r&&f||y&&"end"===r&&p||!y&&"start"===r&&g||!y&&"end"===r&&v),_=b||w;(h||m||_)&&(e.flipped=!0,(h||m)&&(i=s[l+1]),_&&(r=function(e){return"end"===e?"start":"start"===e?"end":e}(r)),e.placement=i+(r?"-"+r:""),e.offsets.popper=bt({},e.offsets.popper,Ft(e.instance.popper,e.offsets.reference,e.placement)),e=Lt(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,o=i.popper,r=i.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return o[s?"left":"top"]=r[n]-(a?o[s?"width":"height"]:0),e.placement=Tt(t),e.offsets.popper=wt(o),e}},hide:{order:800,enabled:!0,fn:function(e){if(!Kt(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=Pt(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,i=t.y,o=e.offsets.popper,r=Pt(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==r?r:t.gpuAcceleration,a=lt(e.instance.popper),l=_t(a),c={position:o.position},d=function(e,t){var n=e.offsets,i=n.popper,o=n.reference,r=Math.round,s=Math.floor,a=function(e){return e},l=r(o.width),c=r(i.width),d=-1!==["left","right"].indexOf(e.placement),u=-1!==e.placement.indexOf("-"),h=t?d||u||l%2==c%2?r:s:a,p=t?r:a;return{left:h(l%2==1&&c%2==1&&!u&&t?i.left-1:i.left),top:p(i.top),bottom:p(i.bottom),right:h(i.right)}}(e,window.devicePixelRatio<2||!zt),u="bottom"===n?"top":"bottom",h="right"===i?"left":"right",p=Nt("transform"),f=void 0,v=void 0;if(v="bottom"===u?"HTML"===a.nodeName?-a.clientHeight+d.bottom:-l.height+d.bottom:d.top,f="right"===h?"HTML"===a.nodeName?-a.clientWidth+d.right:-l.width+d.right:d.left,s&&p)c[p]="translate3d("+f+"px, "+v+"px, 0)",c[u]=0,c[h]=0,c.willChange="transform";else{var g="bottom"===u?-1:1,m="right"===h?-1:1;c[u]=v*g,c[h]=f*m,c.willChange=u+", "+h}var y={"x-placement":e.placement};return e.attributes=bt({},y,e.attributes),e.styles=bt({},c,e.styles),e.arrowStyles=bt({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return Ut(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach((function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&Ut(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,i,o){var r=At(o,t,e,n.positionFixed),s=St(n.placement,r,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",s),Ut(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},nn=function(){function e(t,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gt(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=Ze(this.update.bind(this)),this.options=bt({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(bt({},e.Defaults.modifiers,o.modifiers)).forEach((function(t){i.options.modifiers[t]=bt({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return bt({name:e},i.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&et(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)})),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}return mt(e,[{key:"update",value:function(){return Dt.call(this)}},{key:"destroy",value:function(){return Mt.call(this)}},{key:"enableEventListeners",value:function(){return Bt.call(this)}},{key:"disableEventListeners",value:function(){return Rt.call(this)}}]),e}();nn.Utils=("undefined"!=typeof window?window:i.g).PopperUtils,nn.placements=Wt,nn.Defaults=tn;var on=nn;function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var an="env.popover",ln=".".concat(an),cn={top:"top",bottom:"bottom",left:"left",right:"right"},dn={clickOutside:!1,constraints:[],container:"body",content:"",delay:0,escapeContent:!0,placement:"top",template:'<div class="env-popover" role="tooltip">\n                  <div class="env-popover__arrow"></div>\n                  <div class="env-popover__header">\n                     <h4 class="env-text env-popover__header__title"></h4>\n                  </div>\n                  <div class="env-popover__content"></div>\n               </div>',title:"",trigger:"click"},un=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.$el=h()(this.el),this.config=h().extend({},dn,this.$el.data(),n),this.bindEvents()}var t,n,i;return t=e,i=[{key:"_jQuery",value:function(t){return this.each((function(){var n=h()(this),i=n.data(an);if((i||!/destroy|hide/.test(t))&&(i||(i=new e(this,"object"===rn(t)?t:null),n.data(an,i)),"string"==typeof t)){var o=i[t];if(!o)throw new Error('Invalid method name "'.concat(t,'"'));o.call(i)}}))}}],(n=[{key:"bindEvents",value:function(){var e=this;this.config.trigger.split(" ").forEach((function(t){if("click"===t)e.$el.on(e.config.trigger+ln,(function(){e.isShowing?e.hide():e.show()}));else{var n="hover"===t,i=n?"mouseenter":"focusin",o=n?"mouseleave":"focusout";e.$el.on(i+ln,(function(){e.config.delay>0?(e.hidetimeout&&clearTimeout(e.hidetimeout),e.showtimeout&&clearTimeout(e.showtimeout),e.isShowing||(e.showtimeout=setTimeout((function(){e.show()}),e.config.delay))):e.isShowing||e.show()})).on(o+ln,(function(){e.config.delay>0?(e.hoverPopover(),e.showtimeout&&clearTimeout(e.showtimeout),e.isShowing&&(e.hidetimeout=setTimeout((function(){e.hide()}),e.config.delay))):e.isShowing&&e.hide()}))}}))}},{key:"hoverPopover",value:function(){var e=this,t=this.getPopoverElement();t.off("mouseenter").on("mouseenter",(function(){e.hidetimeout&&clearTimeout(e.hidetimeout),e.showtimeout&&clearTimeout(e.showtimeout),e.isShowing||(e.showtimeout=setTimeout((function(){e.show()}),e.config.delay))})),t.off("mouseleave").on("mouseleave",(function(){e.showtimeout&&clearTimeout(e.showtimeout),e.isShowing&&(e.hidetimeout=setTimeout((function(){e.hide()}),e.config.delay))}))}},{key:"getPopoverElement",value:function(){return this.$popoverElement=this.$popoverElement||h()(this.config.template)}},{key:"setText",value:function(e,t,n){e.find(t)[this.config.escapeContent?"text":"html"](n)}},{key:"setTitle",value:function(e){this.setText(e,".env-popover__header__title",this.config.title)}},{key:"setContent",value:function(e){this.setText(e,".env-popover__content",this.config.content)}},{key:"updateConfig",value:function(e){return Object.assign(this.config,e),this}},{key:"render",value:function(){var e=this.getPopoverElement();this.setTitle(e),this.setContent(e),this.setArrowPosition(e)}},{key:"setArrowPosition",value:function(e){e.find(".env-popover__arrow").addClass("env-popover__arrow--".concat(this.config.placement))}},{key:"hide",value:function(){this.getPopoverElement().detach(),this.config.clickOutside&&h()("body").off(this.config.trigger+ln),this.isShowing=!1}},{key:"_cleanTipClass",value:function(){this.$popoverElement.find(".env-popover__arrow").removeClass((function(e,t){var n=t.replace(/env-popover__arrow/g,"").trim();return"env-popover__arrow".concat(n)}))}},{key:"_handlePopperPlacementChange",value:function(e){this._cleanTipClass(),this._addAttachmentClass(cn[e.placement])}},{key:"_addAttachmentClass",value:function(e){this.$popoverElement.find(".env-popover__arrow").addClass("env-popover__arrow--".concat(e))}},{key:"show",value:function(){var e=this;this.render();var t=this.getPopoverElement();h()("body").append(t),this._popper=new on(this.el,t[0],{placement:cn[this.config.placement],modifiers:{flip:{behavior:"flip"},arrow:{element:".env-popover__arrow"}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),this._popper.update(),this.config.clickOutside&&h()("body").on(this.config.trigger+ln,this.clickOutsideHandler.bind(this)),this.isShowing=!0}},{key:"destroy",value:function(){this.hide(),this._popper&&this._popper.destroy(),this.$popoverElement=void 0,this._popper=void 0,this.isShowing=!1,this.$el.off(),this.$el.removeData(an)}},{key:"clickOutsideHandler",value:function(e){var t=e.target,n=h()(t);!this.isShowing||this.el.contains(t)||n.closest(this.$popoverElement).length||this.hide()}}])&&sn(t.prototype,n),i&&sn(t,i),e}();if("undefined"!=typeof document){var hn=h().fn.envPopover;h().fn.envPopover=un._jQuery,h().fn.envPopover.Constructor=un,h().fn.envPopover.noConflict=function(){return h().fn.envPopover=hn,un._jQuery}}function pn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var fn="range-handle-index",vn="env.range-slider",gn="slide",mn="slidestop",yn={min:0,max:100,step:1,values:[0,0],visibleValues:!0},bn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=h().extend({},yn,n),this.$document=h()(document),this.el=t,this.$el=h()(t),this.handles=this.$el.find(".env-range-slider__handle"),this.$range=this.$el.find(".env-range-slider__range"),this.isTouch=p.isTouch(),this.config.visibleValues&&(this.valueHolders=this.$el.find(".env-range-slider__values__value")),this.handleEvents={mousedown:this._initSlide.bind(this),touchstart:this._initSlide.bind(this),keydown:this._initKeySlide.bind(this),keyup:this._stopKeySlide.bind(this)}}var t,n,i;return t=e,i=[{key:"_jQuery",value:function(t){for(var n=this,i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];return this.each((function(){var i=h()(n),r=i.data(vn);if(r||(r=new e(n,t),i.data(vn,r)),"string"==typeof t){var s=r[t];if(void 0===s)throw new Error('No method named "'.concat(t,'"'));s.call.apply(s,[r].concat(o))}r.initialize()}))}}],(n=[{key:"initialize",value:function(){this._setupHandles(),this._refreshRange(),this._bindEvents(),this.isTouch&&this.$el.addClass("env-range-slider--touch")}},{key:"values",value:function(e){if(h().isArray(e)){for(var t=0;t<e.length;t+=1)this.config.values[t]=this._trimAlignValue(e[t]);this._refreshRange()}}},{key:"_setupHandles",value:function(){this.handles.each((function(e,t){h()(t).data(fn,e)}))}},{key:"_refreshRange",value:function(){var e,t,n,i=this;this.handles.each((function(o,r){n=i._getValue(o),t=(n-i.config.min)/(i.config.max-i.config.min)*100,h()(r).css("left","".concat(t,"%")),0===o?(i.$range.css("left","".concat(t,"%")),i.config.visibleValues&&i.valueHolders.eq(o).text(n)):(i.$range.css("width","".concat(t-e,"%")),i.config.visibleValues&&i.valueHolders.eq(o).text(n)),e=t}))}},{key:"_bindEvents",value:function(){this.handles.off(),this.handles.on(this.handleEvents)}},{key:"_initSlide",value:function(e){var t,n,i,o,r=this,s=this._getPosition(e),a=this._normValueFromMouse(s),l=this.config.max-this.config.min+1;"touchstart"===e.type?(this.$document.on("touchmove.".concat(vn),this._handleSlide.bind(this)),this.$document.one("touchend.".concat(vn),this._stopSlide.bind(this))):(this.$document.on("mousemove.".concat(vn),this._handleSlide.bind(this)),this.$document.one("mouseup.".concat(vn),this._stopSlide.bind(this))),this.handles.each((function(e,s){i=r._getValue(e),o=Math.abs(a-i),(l>o||l===o&&(e===r._lastChangedValue||i===r.config.min))&&(l=o,t=h()(s),n=e)})),this._handleIndex=n,t.trigger("focus");var c=t.offset();this._clickOffset={left:s.x-c.left-t.width()/2,top:s.y-c.top-t.height()/2-(parseInt(t.css("borderTopWidth"),10)||0)-(parseInt(t.css("borderBottomWidth"),10)||0)+(parseInt(t.css("marginTop"),10)||0)},this._slide(e,n,a)}},{key:"_handleSlide",value:function(e){var t=this._normValueFromMouse(this._getPosition(e));return this._slide(e,this._handleIndex,t),!1}},{key:"_slide",value:function(e,t,n){var i=this._getValue(t?0:1),o=this._getValue(t),r=this._getValues();n=0===t?Math.min(i,n):Math.max(i,n),r[t]=n,n!==o&&(this._trigger(gn,e,{values:r}),this._setValue(t,n))}},{key:"_stopSlide",value:function(e){return this.$document.off("mousemove.".concat(vn," touchmove.").concat(vn)),this._trigger(mn,e,{values:this._getValues()}),this._handleIndex=null,this._clickOffset=null,!1}},{key:"_initKeySlide",value:function(e){switch(e.keyCode){case 38:case 40:case 37:case 39:e.preventDefault(),this._keySliding||(this._keySliding=!0);break;default:return}var t,n=h()(e.target).data(fn),i=this._getValue(n);switch(event.keyCode){case 38:case 39:if(i===this.config.max)return;t=this._trimAlignValue(i+this.config.step);break;case 40:case 37:if(i===this.config.min)return;t=this._trimAlignValue(i-this.config.step)}this._slide(e,n,t)}},{key:"_stopKeySlide",value:function(e){this._keySliding&&(this._keySliding=!1,this._trigger(mn,e,{values:this._getValues()}))}},{key:"_normValueFromMouse",value:function(e){var t=this.el.outerWidth(),n=this.config.max-this.config.min,i=(e.x-this.el.offset().left-(this._clickOffset?this._clickOffset.left:0))/t;i>1&&(i=1),i<0&&(i=0);var o=this.config.min+i*n;return this._trimAlignValue(o)}},{key:"_getPosition",value:function(e){var t={};if(this.isTouch){var n=e.originalEvent.touches[0];t.x=n.pageX,t.y=n.pageY}else t.x=e.pageX,t.y=e.pageY;return t}},{key:"_trimAlignValue",value:function(e){if(e<=this.config.min)return this.config.min;if(e>=this.config.max)return this.config.max;var t=this.config.step,n=(e-this.config.min)%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))}},{key:"_getValues",value:function(){return this.config.values.slice()}},{key:"_getValue",value:function(e){return this.config.values[e]}},{key:"_setValue",value:function(e,t){this.config.values[e]=this._trimAlignValue(t),this._refreshRange()}},{key:"_trigger",value:function(e,t,n){var i=this.el[0],o=this.config[e];(t=h().Event(t)).type=e,t.target=i,this.$el.trigger(t,n),o&&o.call(i,t,n)}}])&&pn(t.prototype,n),i&&pn(t,i),e}();if("undefined"!=typeof document){var wn=h().fn.envRangeSlider;h().fn.envRangeSlider=bn._jQuery,h().fn.envRangeSlider.Constructor=bn,h().fn.envRangeSlider.noConflict=function(){return h().fn.envRangeSlider=wn,bn._jQuery}}i(807);function _n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var kn="aria-selected",Cn="aria-hidden",On="env.tabs",xn="env-tabs__link--active",En={active:0},In=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.$el=h()(t),this.$tabs=this.$el.find(".env-tabs__link"),this.config=h().extend({},En,n),this.$panels={},this.$activeTab=void 0,this._bindEvents()}var t,n,i;return t=e,i=[{key:"_jQuery",value:function(t,n){var i=this;return this.each((function(){var o=h()(i),r=o.data(On);if(r){if("string"==typeof t){var s=r[t];if(!s)throw new Error('Invalid method name "'.concat(t,'"'));s.call(r,n)}}else r=new e(i,t),o.data(On,r),r.initialize()}))}}],(n=[{key:"initialize",value:function(){var e=this;this.$tabs.each((function(t,n){var i=h()(n),o=h()(i.attr("href"));e.$panels[i.attr("id")]=o,i.removeClass(xn).attr(kn,!1),o.attr(Cn,!0).hide()})),this._setActive(this.$tabs.eq(this.config.active),!1)}},{key:"activate",value:function(e){this._setActive(this.$tabs.eq(e),!0)}},{key:"destroy",value:function(){this.$tabs.off("click keydown"),this.$activeTab=void 0,this.$tabs=void 0,this.$panels=void 0,this.$el.removeData(On)}},{key:"_bindEvents",value:function(){var e=this;this.$tabs.on("click",(function(t){t.preventDefault(),e._setActive(h()(t.currentTarget),!0)})),this.$tabs.on("keydown",(function(t){13===t.which&&e._setActive(h()(t.currentTarget),!0)}))}},{key:"_setActive",value:function(e,t){this._resetActive(),e.addClass(xn).attr(kn,!0),t&&e.trigger("focus"),this._getPanelForTab(e).attr(Cn,!1).show(),this.$activeTab=e}},{key:"_getPanelForTab",value:function(e){return this.$panels[e.attr("id")]}},{key:"_resetActive",value:function(){this.$activeTab&&(this.$activeTab.removeClass(xn).attr(kn,!1),this._getPanelForTab(this.$activeTab).attr(Cn,!0).hide())}}])&&_n(t.prototype,n),i&&_n(t,i),e}();if("undefined"!=typeof document){var Sn=h().fn.envTabs;h().fn.envTabs=In._jQuery,h().fn.envTabs.Constructor=In,h().fn.envTabs.noConflict=function(){return h().fn.envTabs=Sn,In._jQuery}}}(),o}()}));
//# sourceMappingURL=envision.js.map